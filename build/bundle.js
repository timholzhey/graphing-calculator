(()=>{"use strict";var e={85:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDomain=t.canvasDrawFunction=t.driveCanvas=t.canvasDraw=t.resetCanvas=t.getOffset=t.getScale=t.canvasGetImageDataURL=t.canvasFreezeFrame=t.enablePreview=t.initCanvas=t.mainCanvas=void 0;const o=n(283),r=n(607),a=n(750),i=n(984),l=n(99),s=n(533),u=n(195);t.mainCanvas=document.getElementById("main-canvas");const c=t.mainCanvas.getContext("2d"),E=document.querySelector(".zoom-in-button"),g=document.querySelector(".zoom-out-button"),f=document.querySelector(".fps-display"),T=document.getElementById("app"),h=new o.Vector(0,0);let d=1;const M=16,p=new o.Vector(0,0),m=new o.Vector(0,0);let k=!1,I=!0,L="";const R=function(e){const t=(d*(e>0?1+.2*e:1/(1-.2*e))-d)/10;let n=0;const o=setInterval((function(){d+=t,(0,r.scheduleRedraw)(),n++,n>=10&&clearInterval(o)}),10)};t.initCanvas=function(){t.mainCanvas.addEventListener("mousedown",(function(e){p.set(h.x,h.y),m.set(e.clientX,e.clientY),k=!0})),(0,a.onMouseDrag)(t.mainCanvas,(e=>{k&&(h.x=p.x+e.x-m.x,h.y=p.y+e.y-m.y,(0,r.scheduleRedraw)())})),t.mainCanvas.addEventListener("mouseup",(()=>{k=!1})),t.mainCanvas.addEventListener("mouseleave",(()=>{k=!1})),t.mainCanvas.addEventListener("wheel",(e=>{!function(e){const t=e>0?1+.2*e:1/(1-.2*e);d*=t,h.x*=t,h.y*=t,(0,r.scheduleRedraw)()}(-e.deltaY/200)})),E.addEventListener("click",(()=>{R(1)})),g.addEventListener("click",(()=>{R(-1)})),(0,l.bindExternVariable)("scale",(()=>d),(e=>{d=e,(0,r.scheduleRedraw)()})),(0,l.bindExternVariable)("grid",(()=>I?1:0),(e=>{I=e>0,(0,r.scheduleRedraw)()})),(0,l.bindExternVariable)("offset",(()=>[h.x,h.y]),(e=>{A(e[0],e[1]),(0,r.scheduleRedraw)()})),window.onresize=()=>(0,r.scheduleRedraw)();const e=new URLSearchParams(window.location.search),n=e.get("plot"),o=e.get("scale"),i=e.get("preview");return n&&(0,s.loadPlots)(n.split(";"),[]),o&&(d=parseFloat(o)),!(!i||"true"!==i||((0,t.enablePreview)(),T.classList.add("preview"),0))},t.enablePreview=function(){I=!1,T.classList.add("fullscreen"),(0,r.scheduleRedraw)(),setTimeout((()=>{(0,r.scheduleSnapshot)(),(0,r.scheduleExit)()}),100)},t.canvasFreezeFrame=function(){const e=document.getElementById("shader-canvas");if(!c)return;c.drawImage(e,0,0,t.mainCanvas.width,t.mainCanvas.height);const n=document.createElement("img");n.src=t.mainCanvas.toDataURL("image/png"),L=n.src,n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.objectFit="cover",document.body.appendChild(n)},t.canvasGetImageDataURL=()=>L;const A=function(e,n){h.x=-e*(t.mainCanvas.width/M),h.y=n*(t.mainCanvas.height/M)};t.getScale=()=>d,t.getOffset=()=>h,t.resetCanvas=function(){d=1,h.set(0,0),I=!0,(0,r.scheduleRedraw)()},t.canvasDraw=function(){c&&(t.mainCanvas.width=t.mainCanvas.clientWidth,t.mainCanvas.height=t.mainCanvas.clientHeight,c.clearRect(0,0,t.mainCanvas.width,t.mainCanvas.height),v())},t.driveCanvas=function(){f.innerHTML=(0,r.getFPSSmoothed)().toFixed(0)};const S=function(e,t,n,o){c&&(c.beginPath(),c.moveTo(e,t),c.lineTo(n,o),c.stroke())},v=function(){if(!c||!I)return;const e=t.mainCanvas.width,n=t.mainCanvas.height,o=e/n;c.strokeStyle="#fff",c.lineWidth=2,S(e/2+h.x,0,e/2+h.x,n),S(0,n/2+h.y,e,n/2+h.y);const r=Math.pow(2,Math.floor(Math.log(d)/Math.log(2))),a=n/M/r*d;let i=-Math.floor(M/d/2*r)/r-Math.floor(h.y/a)/r-(h.y<0?1/r:0)-1/r;const l=(n%(2*a)-2*a)/2,s=h.y%a;for(let t=0;t<n+2*a;t+=a,i+=1/r)c.strokeStyle="#666",c.lineWidth=.5,S(0,t+l+s,e,t+l+s),c.strokeStyle="transparent",c.fillStyle="#fff",c.textAlign="right",0!==i&&(c.beginPath(),c.fillText((-i).toString(),e/2+h.x-10,t+l+s+4));const u=e/M/r/o*d;let E=-Math.floor(M/d/2*r*o)/r-Math.floor(h.x/u)/r-(h.x<0?1/r:0)-1/r;const g=(e%(2*u)-2*u)/2,f=h.x%u;for(let t=0;t<e+u;t+=u,E+=1/r)c.strokeStyle="#666",c.lineWidth=.5,S(t+g+f,0,t+g+f,n),c.strokeStyle="transparent",c.fillStyle="#fff",c.textAlign="center",0!==E?(c.beginPath(),c.fillText(E.toString(),t+g+f,n/2+h.y+20)):(c.beginPath(),c.fillText((-E).toString(),t+g+f-18,n/2+h.y+20))};t.canvasDrawFunction=function(e,n,r){if(!c||!e)return;if(r===u.PlotDisplayMode.VECTOR_FIELD)return void function(e,n){if(!c||!e)return;const r=t.mainCanvas.width,a=t.mainCanvas.height,l=r/a;c.strokeStyle=n,c.lineWidth=3,c.fillStyle="transparent",c.beginPath();const s=r/M/l*d,u=h.x/s,E=a/M*d,g=h.y/E;for(let t=-8.5/d+g;t<8/d+g;t+=1/d)for(let s=-8*l/d-u;s<8*l/d-u;s+=1/d){const u=(0,i.constantEvalXY)(e,s,t);if(!(0,o.isIterable)(u))return;const E=u,g=new o.Vector(E[0],E[1]);if(g.mult(d*c.lineWidth),g.mag()>50&&g.setMag(50),g.y*=-1,(0,i.constantEvalGetError)())return;const f=(0,o.map)(s,-8*l/d,8*l/d,0,r)+h.x,T=(0,o.map)(t,-8.5/d,8/d,a,0)+h.y,M=f+g.x,p=T+g.y;c.moveTo(f,T),c.lineTo(M,p);const m=g.copy().mult(.7),k=new o.Vector(f,T).add(m),I=new o.Vector(M,p),L=3.141592653589,R=k.copy().add(m.copy().rotate(L/2).mult(.1)),A=k.copy().add(m.copy().rotate(-L/2).mult(.1));c.fillStyle=n,c.moveTo(I.x,I.y),c.lineTo(R.x,R.y),c.lineTo(A.x,A.y),c.lineTo(I.x,I.y),c.fillStyle="transparent"}c.stroke()}(e,n);const a=t.mainCanvas.width,l=t.mainCanvas.height,s=a/l;c.strokeStyle=n,c.lineWidth=2.5,c.fillStyle="transparent",c.beginPath();const E=a/M/s*d,g=h.x/E;let f=!0;for(let t=-8*s/d-g;t<8*s/d-g;t+=.01/d){const n=(0,i.constantEvalX)(e,t),r="number"==typeof n?n:n.re;if((0,i.constantEvalGetError)())return;const u=(0,o.map)(t,-8*s/d,8*s/d,0,a)+h.x,E=(0,o.map)(r,-8/d,8/d,l,0)+h.y;f&&(c.moveTo(u,E),f=!1),c.lineTo(u,E)}c.stroke()},t.getDomain=function(){const e=t.mainCanvas.width,n=t.mainCanvas.height,o=e/n,r=e/M/o*d,a=h.x/r,i=-8*o/d-a,l=8*o/d-a,s=n/M*d,u=h.y/s;return{minX:i,maxX:l,minY:-8/d+u,maxY:8/d+u}}},984:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.constantEvalGetError=t.constantEvalXY=t.constantEvalX=t.constantEval=void 0;const o=n(607),r=n(99),a=n(750),i=n(283),l=n(490);let s,u,c=null,E=0,g=1;t.constantEval=function(e){return e?(c=null,E=0,g=1,h(e)):0},t.constantEvalX=function(e,n){s=n;const o=(0,t.constantEval)(e);return s=null,o},t.constantEvalXY=function(e,n,o){s=n,u=o;const r=(0,t.constantEval)(e);return s=null,u=null,r};const f=function(e){return console.debug("Error during constant evaluation: "+e),c=e,0};t.constantEvalGetError=()=>c;const T=(0,l.mkSimplexNoise)((0,i.splitmix32)(12345)),h=function(e){var t,n;let l,c;switch(e.op.tok){case r.Token.UNDEF:return f("Token UNDEFINED is not allowed");case r.Token.NONE:return 0;case r.Token.PAREN_OP:return f("Token OPEN PARENTHESIS is not allowed");case r.Token.PAREN_CL:return f("Token CLOSE PARENTHESIS is not allowed");case r.Token.BRACKET_OP:return f("Token OPEN BRACKET is not allowed");case r.Token.BRACKET_CL:return f("Token CLOSE BRACKET is not allowed");case r.Token.BRACE_OP:return f("Token OPEN BRACE is not allowed");case r.Token.BRACE_CL:return f("Token CLOSE BRACE is not allowed");case r.Token.NUM:return"number"!=typeof e.op.val?f("Token NUMBER must be a number"):(0,i.cpx)(e.op.val);case r.Token.CONST:return"number"!=typeof e.op.val?f("Token CONSTANT must be a number"):(0,i.cpx)(e.op.val);case r.Token.VAR:return null==s?f("Token VARIABLE is not defined"):(0,i.cpx)(s);case r.Token.VAR2:return null==u?f("Token VARIABLE2 is not defined"):(0,i.cpx)(u);case r.Token.TIME:return(0,o.scheduleRedraw)(),(0,i.cpx)((0,o.getGlobalTime)());case r.Token.ADD:return null==e.left||null==e.right?f("Missing arguments for Token ADDITION"):(l=h(e.left),c=h(e.right),{re:l.re+c.re,im:l.im+c.im});case r.Token.SUB:return null==e.left||null==e.right?f("Missing arguments for Token SUBTRACTION"):(l=h(e.left),c=h(e.right),{re:l.re-c.re,im:l.im-c.im});case r.Token.MULT:return null==e.left||null==e.right?f("Missing arguments for Token MULTIPLICATION"):(l=h(e.left),c=h(e.right),0===l.im&&0===c.im?(0,i.cpx)(l.re*c.re):{re:l.re*c.re-l.im*c.im,im:l.re*c.im+l.im*c.re});case r.Token.DIV:{if(null==e.left||null==e.right)return f("Missing arguments for Token DIVISION");if(l=h(e.left),c=h(e.right),0===c.re&&0===c.im)return f("Division by zero");if(0===l.im&&0===c.im)return(0,i.cpx)(l.re/c.re);const t=c.re*c.re+c.im*c.im;return{re:(l.re*c.re+l.im*c.im)/t,im:(l.im*c.re-l.re*c.im)/t}}case r.Token.POW:{if(null==e.left||null==e.right)return f("Missing arguments for Token POWER");if(l=h(e.left),c=h(e.right),0===l.im&&0===c.im)return(0,i.cpx)(Math.pow(l.re,c.re));if(0!==c.im)return f("Imaginary power is not allowed");const t=Math.sqrt(l.re*l.re+l.im*l.im),n=Math.atan2(l.im,l.re),o=Math.pow(t,c.re),r=c.re*n;return{re:o*Math.cos(r),im:o*Math.sin(r)}}case r.Token.SQRT:return null==e.right?f("Missing argument for Token SQUARE ROOT"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.sqrt(c.re)):f("SQUARE ROOT is not defined for complex numbers"));case r.Token.LOG:return null==e.right?f("Missing argument for Token LOGARITHM"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.log(c.re)):f("LOGARITHM is not defined for complex numbers"));case r.Token.EXP:return null==e.right?f("Missing argument for Token EXPOENTIAL"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.exp(c.re)):{re:Math.exp(c.re)*Math.cos(c.im),im:Math.exp(c.re)*Math.sin(c.im)});case r.Token.SIN:return null==e.right?f("Missing argument for Token SINE"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.sin(c.re)):{re:Math.sin(c.re)*Math.cosh(c.im),im:Math.cos(c.re)*Math.sinh(c.im)});case r.Token.COS:return null==e.right?f("Missing argument for Token COSINE"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.cos(c.re)):{re:Math.cos(c.re)*Math.cosh(c.im),im:-Math.sin(c.re)*Math.sinh(c.im)});case r.Token.TAN:return null==e.right?f("Missing argument for Token TANGENT"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.tan(c.re)):{re:Math.sin(2*c.re)/(Math.cos(2*c.re)+Math.cosh(2*c.im)),im:Math.sinh(2*c.im)/(Math.cos(2*c.re)+Math.cosh(2*c.im))});case r.Token.ASIN:return null==e.right?f("Missing argument for Token ARC SINE"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.asin(c.re)):{re:Math.log(c.re+Math.sqrt(1-c.re*c.re)),im:Math.sign(c.im)*Math.sqrt(1-c.re*c.re)});case r.Token.SINH:return null==e.right?f("Missing argument for Token SINE HYPERBOLICUS"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.sinh(c.re)):{re:Math.cosh(c.re)*Math.cos(c.im),im:Math.sinh(c.re)*Math.sin(c.im)});case r.Token.COSH:return null==e.right?f("Missing argument for Token COSINE HYPERBOLICUS"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.cosh(c.re)):{re:Math.cosh(c.re)*Math.cos(c.im),im:Math.sinh(c.re)*Math.sin(c.im)});case r.Token.TANH:return null==e.right?f("Missing argument for Token TANGENT HYPERBOLICUS"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.tanh(c.re)):{re:Math.cosh(2*c.re)/(Math.cos(2*c.re)+Math.cosh(2*c.im)),im:Math.sinh(2*c.im)/(Math.cos(2*c.re)+Math.cosh(2*c.im))});case r.Token.ACOS:return null==e.right?f("Missing argument for Token ARC COSINE"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.acos(c.re)):{re:Math.log(c.re+Math.sqrt(1-c.re*c.re)),im:-Math.sign(c.im)*Math.sqrt(1-c.re*c.re)});case r.Token.ATAN:return null==e.right?f("Missing argument for Token ARC TANGENT"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.atan(c.re)):{re:Math.atan(c.re/c.im),im:Math.log((1+c.im)/(1-c.im))/2});case r.Token.FLOOR:return null==e.right?f("Missing argument for Token FLOOR"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.floor(c.re)):f("FLOOR is not defined for complex numbers"));case r.Token.MIN:{if(null==e.right)return f("Missing argument for Token MIN");if(!(0,i.isIterable)(h(e.right)))return f("Malformed argument for Token MIN");const t=[...h(e.right)];return(0,i.cpx)(Math.min(...t))}case r.Token.MAX:{if(null==e.right)return f("Missing argument for Token MAX");if(!(0,i.isIterable)(h(e.right)))return f("Malformed argument for Token MAX");const t=[...h(e.right)];return(0,i.cpx)(Math.max(...t))}case r.Token.DELIM:{if(null==e.left||null==e.right)return f("Missing arguments for Token DELIMITER");l=h(e.left),c=h(e.right);const t=[];return"number"==typeof(null==l?void 0:l.re)?t.push(null==l?void 0:l.re):t.concat(null==l?void 0:l.re),"number"==typeof(null==c?void 0:c.re)?t.push(null==c?void 0:c.re):t.concat(null==c?void 0:c.re),t}case r.Token.ABS:return null==e.right?f("Missing argument for Token ABSOLUTE"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.abs(c.re)):(0,i.cpx)(Math.sqrt(c.re*c.re+c.im*c.im)));case r.Token.RAND:return null==e.right?f("Missing argument for Token RANDOM"):(0,i.cpx)(Math.random()*h(e.right).re);case r.Token.PERLIN:{if(null==e.right)return f("Missing arguments for Token PERLIN");if(!(0,i.isIterable)(h(e.right)))return(0,i.cpx)(T.noise2D(h(e.right).re,0));const[t,n]=h(e.right);return(0,i.cpx)(T.noise2D(t,n))}case r.Token.MOD:return null==e.left||null==e.right?f("Missing arguments for Token MODULUS"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re%c.re):f("MODULUS is not defined for complex numbers"));case r.Token.LEVEL_SET:return f("Token LEVEL SET is not allowed");case r.Token.VECTOR_FIELD:return null==e.right?f("Missing argument for Token VECTOR FIELD"):h(e.right);case r.Token.LESS:return null==e.left||null==e.right?f("Missing arguments for Token LESS THAN"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re<c.re?1:0):f("LESS THAN is not defined for complex numbers"));case r.Token.GREATER:return null==e.left||null==e.right?f("Missing arguments for Token GREATER THAN"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re>c.re?1:0):f("GREATER THAN is not defined for complex numbers"));case r.Token.LESS_OR_EQUAL:return null==e.left||null==e.right?f("Missing arguments for Token LESS THAN OR EQUAL TO"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re<=c.re?1:0):f("LESS THAN OR EQUAL TO is not defined for complex numbers"));case r.Token.GREATER_OR_EQUAL:return null==e.left||null==e.right?f("Missing arguments for Token GREATER THAN OR EQUAL TO"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re>=c.re?1:0):f("GREATER THAN OR EQUAL TO is not defined for complex numbers"));case r.Token.EQUAL:return null==e.left||null==e.right?f("Missing arguments for Token EQUAL TO"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(Math.abs(l.re-c.re)<1e-10?1:0):(0,i.cpx)(Math.abs(l.re-c.re)<1e-10&&Math.abs(l.im-c.im)<1e-10?1:0));case r.Token.AND:return null==e.left||null==e.right?f("Missing arguments for Token AND"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re&&c.re?1:0):f("AND is not defined for complex numbers"));case r.Token.OR:return null==e.left||null==e.right?f("Missing arguments for Token OR"):(l=h(e.left),c=h(e.right),0===c.im?(0,i.cpx)(l.re||c.re?1:0):f("OR is not defined for complex numbers"));case r.Token.USERVAR:return(0,i.cpx)((0,r.getUserVariable)(e.op.val));case r.Token.FACTORIAL:return null==e.right?f("Missing argument for Token FACTORIAL"):(c=h(e.right),0===c.im?(0,i.cpx)((0,i.factorial)(c.re)):f("FACTORIAL is not defined for complex numbers"));case r.Token.SIGMOID:return null==e.right?f("Missing argument for Token SIGMOID"):(c=h(e.right),0===c.im?(0,i.cpx)((0,i.sigmoid)(c.re)):f("SIGMOID is not defined for complex numbers"));case r.Token.CIRCLE:return f("Token CIRCLE is not allowed");case r.Token.POINT:return f("Token POINT is not allowed");case r.Token.TRUE:return(0,i.cpx)(1);case r.Token.FALSE:return(0,i.cpx)(0);case r.Token.POLAR:return f("Token POLAR is not allowed");case r.Token.CARTESIAN:return f("Token CARTESIAN is not allowed");case r.Token.MOUSEX:return(0,i.cpx)((0,a.getMousePos)().x);case r.Token.MOUSEY:return(0,i.cpx)((0,a.getMousePos)().y);case r.Token.MOUSE:return[(0,a.getMousePos)().x,(0,a.getMousePos)().y];case r.Token.IMAGINARY:return{re:0,im:1};case r.Token.SERIES:{if(null==e.right||null==e.right.left||null==e.right.right||null==e.right.left.left||null==e.right.left.right)return f("Missing argument for Token SERIES");const t=h(e.right.left.left).re,n=h(e.right.left.right).re,o=e.right.right;for(E=t;g<=n;g++)E=h(o).re;return(0,i.cpx)(E)}case r.Token.DIV_SERIES:return f("Token SERIES not implemented");case r.Token.ITERATOR:return(0,i.cpx)(E);case r.Token.INDEX:return(0,i.cpx)(g);case r.Token.COMPLEX:return f("Token COMPLEX is not allowed");case r.Token.GRADIENT:return f("Token GRADIENT is not allowed");case r.Token.MAGNITUDE:return null==e.right?f("Missing argument for Token MAGNITUDE"):(c=h(e.right),0===c.im?(0,i.cpx)(Math.abs(c.re)):null==e.right?f("Missing argument for Token SIGMOID"):(0,i.cpx)(Math.sqrt(c.re*c.re+c.im*c.im)));case r.Token.ASSIGN:return null==e.left||null==e.right?f("Missing arguments for Token ASSIGN"):e.left.op.tok!==r.Token.ASSIGNABLE?e.left.op.tok===r.Token.USERVAR?((0,r.setUserVariable)(e.left.op.val,h(e.right).re),h(e.right)):f("Left side of ASSIGN must be assignable"):null==(0,r.getExternVariable)(e.left.op.val)?f(`Variable ${e.left.op.val} does not exist`):(c=h(e.right),null===(t=(0,r.getExternVariable)(e.left.op.val))||void 0===t||t.set((null==c?void 0:c.re)?c.re:c),h(e.right));case r.Token.ASSIGNABLE:{if(null==(0,r.getExternVariable)(e.op.val))return f(`Variable ${e.op.val} does not exist`);const t=null===(n=(0,r.getExternVariable)(e.op.val))||void 0===n?void 0:n.get();return(0,i.isIterable)(t)?t:(0,i.cpx)(t)}default:return f(`Unknown token ${e.op.tok}`)}}},533:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPlotsShaderInfo=t.drawPlots=t.drivePlots=t.loadPlots=t.getStatusFromIndex=t.getColorFromIndex=t.resetPlots=t.setNumInputs=t.setInputAt=void 0;const o=n(607),r=n(85),a=n(195),i=n(103),l=n(849),s=n(320),u=n(984),c=[];let E=0;t.setInputAt=(e,t)=>{e<0||e>E||(c[e]||(c[e]=f(e),(0,s.inputSetColorAt)(e,c[e].color)),c[e].input=t,c[e].inputChanged=!0,(0,o.scheduleRedraw)())},t.setNumInputs=e=>{E=e;for(let e=E;e<c.length;e++)delete c[e];(0,o.scheduleRedraw)()},t.resetPlots=()=>{c.length=0,(0,o.scheduleRedraw)()};const g=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];t.getColorFromIndex=e=>g[(e-1)%g.length],t.getStatusFromIndex=e=>e<1||e>E?a.PlotStatus.PENDING:c[e].status,t.loadPlots=function(e,n){(0,r.resetCanvas)(),(0,s.resetInputs)(),(0,t.setNumInputs)(n.length);for(let e=0;e<n.length;e++)(0,s.addNewInputWithValue)(n[e]);(0,t.drivePlots)(),(0,t.drawPlots)(),(0,s.resetInputs)(),(0,t.setNumInputs)(e.length);for(let t=0;t<e.length;t++)(0,s.addNewInputWithValue)(e[t])};const f=function(e){return{input:"",inputChanged:!1,ast:null,status:a.PlotStatus.PENDING,driver:a.PlotDriver.CANVAS,displayMode:a.PlotDisplayMode.NONE,shaderFunction:"",continuous:!1,color:(0,t.getColorFromIndex)(e),error:"",iterExpr:""}};t.drivePlots=()=>{let e=!1;for(let t=1;t<=E;t++){c[t]||(c[t]=f(t),(0,s.inputSetColorAt)(t,c[t].color));const n=c[t];if(n.inputChanged){e=!0,n.inputChanged=!1;const r=n.status;if(0===n.input.trim().length){n.status=a.PlotStatus.PENDING,n.ast=null,r!==n.status&&(0,s.inputSetStatusAt)(t,n.status),(0,o.scheduleRedraw)();continue}const u=n.ast;n.ast=(0,i.parse)(n.input),console.debug("Parsed AST:",n.ast);const c=n.error,E=(0,i.parserGetError)();E?(n.status=a.PlotStatus.ERROR,n.error=E.desc):(n.status=a.PlotStatus.ACTIVE,n.error=""),JSON.stringify(u)!==JSON.stringify(n.ast)&&(0,o.scheduleRedraw)();const g=(0,i.parserGetDriver)();if(n.driver!==g&&(n.driver=g,(0,s.inputSetDriverAt)(t,g)),n.displayMode=(0,i.parserGetDisplayMode)(),n.driver===a.PlotDriver.WEBGL){n.shaderFunction=(0,l.buildShaderFunction)(n.ast)||"undefined",n.iterExpr=(0,l.shaderFunctionBuilderGetIterExpression)();const e=(0,l.shaderFunctionBuilderGetError)();e&&(n.status=a.PlotStatus.ERROR,n.error=e)}n.continuous=(0,i.parserGetContinuous)(),n.status!==r&&(0,s.inputSetStatusAt)(t,n.status),n.error!==c&&(0,s.inputSetErrorAt)(t,n.error)}}if(e){const e=[];for(let t=1;t<=E;t++)e.push(c[t].input);let t="?";t+="plot="+e.map((e=>encodeURIComponent(e))).join(";");const n=(0,r.getScale)();1!==n&&(t+="&scale="+n),window.history.pushState("","",t)}},t.drawPlots=()=>{for(let e=1;e<=E;e++){const t=c[e];if(t&&t.status===a.PlotStatus.ACTIVE){switch(t.driver){case a.PlotDriver.CONSTANT:{const n=(0,u.constantEval)(t.ast);(0,s.inputSetConstEvalAt)(e,n);const o=(0,u.constantEvalGetError)();o&&(t.status=a.PlotStatus.ERROR,t.error=o,(0,s.inputSetStatusAt)(e,t.status),(0,s.inputSetErrorAt)(e,t.error));break}case a.PlotDriver.CANVAS:{(0,r.canvasDrawFunction)(t.ast,t.color,t.displayMode);const n=(0,u.constantEvalGetError)();n&&(t.status=a.PlotStatus.ERROR,t.error=n,(0,s.inputSetStatusAt)(e,t.status),(0,s.inputSetErrorAt)(e,t.error));break}case a.PlotDriver.WEBGL:break;default:console.error("Unhandled plot driver")}t.continuous&&(0,o.scheduleRedraw)()}}},t.getPlotsShaderInfo=()=>{const e=[],t=[],n=[],o=[];let r=0;for(let i=1;i<=E;i++){const l=c[i];l&&l.driver===a.PlotDriver.WEBGL&&l.status===a.PlotStatus.ACTIVE&&l.driver===a.PlotDriver.WEBGL&&(e.push(l.shaderFunction),t.push(l.color),n.push(l.displayMode),o.push(l.iterExpr),r++)}return{functions:e,colors:t,displayModes:n,numPlots:r,iterExpr:o}}},195:(e,t)=>{var n,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlotDriver=t.PlotStatus=t.PlotDisplayMode=void 0,(r=t.PlotDisplayMode||(t.PlotDisplayMode={}))[r.NONE=0]="NONE",r[r.CONSTANT_EVAL=1]="CONSTANT_EVAL",r[r.FUNCTION_GRAPH=2]="FUNCTION_GRAPH",r[r.SET=3]="SET",r[r.LEVEL_SET=4]="LEVEL_SET",r[r.VECTOR_FIELD=5]="VECTOR_FIELD",r[r.GRADIENT=6]="GRADIENT",(o=t.PlotStatus||(t.PlotStatus={}))[o.PENDING=0]="PENDING",o[o.ACTIVE=1]="ACTIVE",o[o.ERROR=2]="ERROR",(n=t.PlotDriver||(t.PlotDriver={}))[n.CONSTANT=0]="CONSTANT",n[n.CANVAS=1]="CANVAS",n[n.WEBGL=2]="WEBGL"},99:(e,t)=>{var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.lex=t.clearUserVariables=t.getUserVariable=t.setUserVariable=t.getExternVariable=t.unbindExternVariable=t.bindExternVariable=t.lexerGetError=t.TokenFlag=t.Token=void 0,function(e){e[e.UNDEF=0]="UNDEF",e[e.NONE=1]="NONE",e[e.VAR=2]="VAR",e[e.VAR2=3]="VAR2",e[e.NUM=4]="NUM",e[e.CONST=5]="CONST",e[e.PAREN_OP=6]="PAREN_OP",e[e.PAREN_CL=7]="PAREN_CL",e[e.BRACKET_OP=8]="BRACKET_OP",e[e.BRACKET_CL=9]="BRACKET_CL",e[e.BRACE_OP=10]="BRACE_OP",e[e.BRACE_CL=11]="BRACE_CL",e[e.DELIM=12]="DELIM",e[e.ASSIGN=13]="ASSIGN",e[e.ASSIGNABLE=14]="ASSIGNABLE",e[e.LESS=15]="LESS",e[e.GREATER=16]="GREATER",e[e.LESS_OR_EQUAL=17]="LESS_OR_EQUAL",e[e.GREATER_OR_EQUAL=18]="GREATER_OR_EQUAL",e[e.USERVAR=19]="USERVAR",e[e.ADD=20]="ADD",e[e.SUB=21]="SUB",e[e.MULT=22]="MULT",e[e.DIV=23]="DIV",e[e.POW=24]="POW",e[e.AND=25]="AND",e[e.OR=26]="OR",e[e.NOT_EQUAL=27]="NOT_EQUAL",e[e.EQUAL=28]="EQUAL",e[e.TRUE=29]="TRUE",e[e.FALSE=30]="FALSE",e[e.SQRT=31]="SQRT",e[e.EXP=32]="EXP",e[e.LOG=33]="LOG",e[e.SIN=34]="SIN",e[e.COS=35]="COS",e[e.TAN=36]="TAN",e[e.ASIN=37]="ASIN",e[e.ACOS=38]="ACOS",e[e.ATAN=39]="ATAN",e[e.SINH=40]="SINH",e[e.COSH=41]="COSH",e[e.TANH=42]="TANH",e[e.FLOOR=43]="FLOOR",e[e.MIN=44]="MIN",e[e.MAX=45]="MAX",e[e.ABS=46]="ABS",e[e.MOD=47]="MOD",e[e.RAND=48]="RAND",e[e.PERLIN=49]="PERLIN",e[e.FACTORIAL=50]="FACTORIAL",e[e.SIGMOID=51]="SIGMOID",e[e.LEVEL_SET=52]="LEVEL_SET",e[e.VECTOR_FIELD=53]="VECTOR_FIELD",e[e.CIRCLE=54]="CIRCLE",e[e.POINT=55]="POINT",e[e.TIME=56]="TIME",e[e.MAGNITUDE=57]="MAGNITUDE",e[e.IMAGINARY=58]="IMAGINARY",e[e.POLAR=59]="POLAR",e[e.CARTESIAN=60]="CARTESIAN",e[e.MOUSEX=61]="MOUSEX",e[e.MOUSEY=62]="MOUSEY",e[e.MOUSE=63]="MOUSE",e[e.SERIES=64]="SERIES",e[e.DIV_SERIES=65]="DIV_SERIES",e[e.ITERATOR=66]="ITERATOR",e[e.COMPLEX=67]="COMPLEX",e[e.GRADIENT=68]="GRADIENT",e[e.INDEX=69]="INDEX"}(n=t.Token||(t.Token={})),function(e){e[e.IMPL_MULT_BEFORE=1]="IMPL_MULT_BEFORE",e[e.IMPL_MULT_AFTER=2]="IMPL_MULT_AFTER",e[e.PREFIX=4]="PREFIX",e[e.UNIQUE=16]="UNIQUE",e[e.BEGIN_SCOPE=32]="BEGIN_SCOPE",e[e.END_SCOPE=64]="END_SCOPE",e[e.WEBGL_ONLY=128]="WEBGL_ONLY"}(o=t.TokenFlag||(t.TokenFlag={}));const r={"(":{tok:n.PAREN_OP,flags:o.IMPL_MULT_BEFORE|o.UNIQUE|o.BEGIN_SCOPE},")":{tok:n.PAREN_CL,flags:o.IMPL_MULT_AFTER|o.UNIQUE|o.END_SCOPE},"[":{tok:n.BRACKET_OP,flags:o.IMPL_MULT_BEFORE|o.UNIQUE|o.BEGIN_SCOPE},"]":{tok:n.BRACKET_CL,flags:o.IMPL_MULT_AFTER|o.UNIQUE|o.END_SCOPE},"{":{tok:n.BRACE_OP,flags:o.IMPL_MULT_BEFORE|o.UNIQUE|o.BEGIN_SCOPE},"}":{tok:n.BRACE_CL,flags:o.IMPL_MULT_AFTER|o.UNIQUE|o.END_SCOPE},",":{tok:n.DELIM,flags:o.UNIQUE},"=":{tok:n.ASSIGN,flags:0},x:{tok:n.VAR,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},y:{tok:n.VAR2,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER|o.WEBGL_ONLY},"<":{tok:n.LESS,flags:0},">":{tok:n.GREATER,flags:0},"<=":{tok:n.LESS_OR_EQUAL,flags:o.UNIQUE},">=":{tok:n.GREATER_OR_EQUAL,flags:o.UNIQUE},"!=":{tok:n.NOT_EQUAL,flags:o.UNIQUE},"==":{tok:n.EQUAL,flags:o.UNIQUE},"&&":{tok:n.AND,flags:o.UNIQUE},"||":{tok:n.OR,flags:o.UNIQUE},"+":{tok:n.ADD,flags:o.UNIQUE},"-":{tok:n.SUB,flags:o.UNIQUE},"*":{tok:n.MULT,flags:0},"/":{tok:n.DIV,flags:o.UNIQUE},"^":{tok:n.POW,flags:o.UNIQUE},"**":{tok:n.POW,flags:o.UNIQUE},"%":{tok:n.MOD,flags:0},mod:{tok:n.MOD,flags:0},true:{tok:n.TRUE,flags:0},false:{tok:n.FALSE,flags:0},sqrt:{tok:n.SQRT,flags:o.IMPL_MULT_BEFORE|o.PREFIX},exp:{tok:n.EXP,flags:o.IMPL_MULT_BEFORE|o.PREFIX},log:{tok:n.LOG,flags:o.IMPL_MULT_BEFORE|o.PREFIX},ln:{tok:n.LOG,flags:o.IMPL_MULT_BEFORE|o.PREFIX},sin:{tok:n.SIN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},cos:{tok:n.COS,flags:o.IMPL_MULT_BEFORE|o.PREFIX},tan:{tok:n.TAN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},asin:{tok:n.ASIN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},acos:{tok:n.ACOS,flags:o.IMPL_MULT_BEFORE|o.PREFIX},atan:{tok:n.ATAN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},arcsin:{tok:n.ASIN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},arccos:{tok:n.ACOS,flags:o.IMPL_MULT_BEFORE|o.PREFIX},arctan:{tok:n.ATAN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},sinh:{tok:n.SINH,flags:o.IMPL_MULT_BEFORE|o.PREFIX},cosh:{tok:n.COSH,flags:o.IMPL_MULT_BEFORE|o.PREFIX},tanh:{tok:n.TANH,flags:o.IMPL_MULT_BEFORE|o.PREFIX},floor:{tok:n.FLOOR,flags:o.IMPL_MULT_BEFORE|o.PREFIX},min:{tok:n.MIN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},max:{tok:n.MAX,flags:o.IMPL_MULT_BEFORE|o.PREFIX},abs:{tok:n.ABS,flags:o.IMPL_MULT_BEFORE|o.PREFIX},rand:{tok:n.RAND,flags:o.IMPL_MULT_BEFORE|o.PREFIX},random:{tok:n.RAND,flags:o.IMPL_MULT_BEFORE|o.PREFIX},perlin:{tok:n.PERLIN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},noise:{tok:n.PERLIN,flags:o.IMPL_MULT_BEFORE|o.PREFIX},fact:{tok:n.FACTORIAL,flags:o.IMPL_MULT_BEFORE|o.PREFIX},factorial:{tok:n.FACTORIAL,flags:o.IMPL_MULT_BEFORE|o.PREFIX},sigmoid:{tok:n.SIGMOID,flags:o.IMPL_MULT_BEFORE|o.PREFIX},Level:{tok:n.LEVEL_SET,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},Niveau:{tok:n.LEVEL_SET,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},VectorField:{tok:n.VECTOR_FIELD,flags:o.IMPL_MULT_BEFORE|o.PREFIX},"|":{tok:n.ABS,flags:o.BEGIN_SCOPE|o.END_SCOPE},Circle:{tok:n.CIRCLE,flags:o.PREFIX|o.WEBGL_ONLY},Point:{tok:n.POINT,flags:o.PREFIX|o.WEBGL_ONLY},Polar:{tok:n.POLAR,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},Pol:{tok:n.POLAR,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},Cartesian:{tok:n.CARTESIAN,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},Cart:{tok:n.CARTESIAN,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},t:{tok:n.TIME,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},mouseX:{tok:n.MOUSEX,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},mouseY:{tok:n.MOUSEY,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},mouse:{tok:n.MOUSE,flags:0},i:{tok:n.IMAGINARY,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},Series:{tok:n.SERIES,flags:o.IMPL_MULT_BEFORE|o.PREFIX},DivSeries:{tok:n.DIV_SERIES,flags:o.IMPL_MULT_BEFORE|o.PREFIX|o.WEBGL_ONLY},k:{tok:n.ITERATOR,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},j:{tok:n.INDEX,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},z:{tok:n.COMPLEX,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER},Mag:{tok:n.MAGNITUDE,flags:o.IMPL_MULT_BEFORE|o.PREFIX},Gradient:{tok:n.GRADIENT,flags:o.PREFIX|o.WEBGL_ONLY}},a={pi:Math.PI,Pi:Math.PI,e:Math.E};let i=null;t.lexerGetError=()=>i;const l=e=>/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e),s={};t.bindExternVariable=(e,t,n)=>{s[e]={get:t,set:n}},t.unbindExternVariable=e=>{delete s[e]},t.getExternVariable=e=>s[e];let u={};t.setUserVariable=(e,t)=>{u[e]=t},t.getUserVariable=e=>u[e]||0,t.clearUserVariables=()=>{u={}},t.lex=e=>{i=null;const t=(e=e.replace(/\s/g,"")).split(new RegExp(`(${Object.keys(r).filter((e=>r[e].flags&o.UNIQUE)).map((e=>(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(e))).join("|")})`,"g")).filter((e=>""!==e)),u=[];let c=0;return t.forEach((e=>{let t=0;for(let f=e.length;f>t;f--){const T=e.substring(t,f);let h=!1;if(r[T])u.push({tok:r[T].tok,val:0,flags:r[T].flags}),h=!0;else if(a[T])u.push({tok:n.CONST,val:a[T],flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER}),h=!0;else if(s[T])u.push({tok:n.ASSIGNABLE,val:T,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER}),h=!0;else if(isNaN(Number(T))){if(f-1===t){let r="";for(let n=t+1;n<=e.length;n++){const o=e.substring(t,n);if(!l(o))break;r=o}if(""!==r){u.push({tok:n.USERVAR,val:r,flags:o.IMPL_MULT_BEFORE|o.IMPL_MULT_AFTER}),t+=r.length,f=e.length+1;continue}return E=`Unknown token: ´${e.substring(t,e.length)}´`,g=c+t,console.debug(`Error at position ${g}: ${E}`),i={desc:E,pos:g},[]}}else u.push({tok:n.NUM,val:parseFloat(T),flags:o.IMPL_MULT_AFTER}),h=!0;h&&(t=f,f=e.length+1)}var E,g;c+=e.length})),u}},103:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.parserGetDisplayMode=t.parserGetDriver=t.parserGetContinuous=t.parserGetError=void 0;const o=n(195),r=n(99),a={[r.Token.OR]:0,[r.Token.DELIM]:1,[r.Token.AND]:2,[r.Token.EQUAL]:3,[r.Token.NOT_EQUAL]:3,[r.Token.ASSIGN]:3,[r.Token.LESS]:4,[r.Token.LESS_OR_EQUAL]:4,[r.Token.GREATER]:4,[r.Token.GREATER_OR_EQUAL]:4,[r.Token.ADD]:5,[r.Token.SUB]:5,[r.Token.MULT]:6,[r.Token.DIV]:6,[r.Token.MOD]:6,[r.Token.POW]:7},i=(e,t)=>{console.debug(`Error at position ${t}: ${e}`),l={desc:e,pos:t}};let l=null,s=!1,u=o.PlotDriver.CONSTANT,c=o.PlotDisplayMode.NONE;t.parserGetError=()=>l,t.parserGetContinuous=()=>s,t.parserGetDriver=()=>u,t.parserGetDisplayMode=()=>c,t.parse=e=>{l=null,s=!1,u=o.PlotDriver.CONSTANT,c=o.PlotDisplayMode.NONE;let t=(0,r.lex)(e);console.debug("Lexer output:",t);const n=(0,r.lexerGetError)();if(n)return l=JSON.parse(JSON.stringify(n)),null;if(t=E(t),console.debug("Validated ops:",t),null==t)return null;if(t=g(t),console.debug("Expanded ops:",t),null==t)return null;const a=(t.filter((e=>e.tok===r.Token.VAR)).length>0?1:0)+(t.filter((e=>e.tok===r.Token.VAR2)).length>0?1:0);return t.filter((e=>e.tok===r.Token.VECTOR_FIELD)).length>0?(u=o.PlotDriver.CANVAS,c=o.PlotDisplayMode.VECTOR_FIELD):t.filter((e=>e.flags&r.TokenFlag.WEBGL_ONLY)).length>0?(u=o.PlotDriver.WEBGL,c=o.PlotDisplayMode.SET,t.filter((e=>e.tok===r.Token.LEVEL_SET)).length>0?c=o.PlotDisplayMode.LEVEL_SET:t.filter((e=>e.tok===r.Token.GRADIENT)).length>0&&(c=o.PlotDisplayMode.GRADIENT)):0===a?(u=o.PlotDriver.CONSTANT,c=o.PlotDisplayMode.CONSTANT_EVAL):1===a&&(u=o.PlotDriver.CANVAS,c=o.PlotDisplayMode.FUNCTION_GRAPH),s=t.filter((e=>e.tok===r.Token.TIME)).length>0||t.filter((e=>e.tok===r.Token.MOUSEX)).length>0||t.filter((e=>e.tok===r.Token.MOUSEY)).length>0,t=f(t),console.debug("Optimized ops:",t),null==t?null:T(t)};const E=e=>{const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(o.flags&r.TokenFlag.BEGIN_SCOPE&&t.push({tok:o.tok,pos:n}),o.flags&r.TokenFlag.END_SCOPE){const{tok:e,pos:n}=t.pop()||{tok:r.Token.NONE,pos:0};let a=r.Token.NONE;switch(e){case r.Token.PAREN_OP:a=r.Token.PAREN_CL;break;case r.Token.BRACKET_OP:a=r.Token.BRACKET_CL;break;case r.Token.BRACE_OP:a=r.Token.BRACE_CL;break;case r.Token.ABS:a=r.Token.ABS}if(o.tok!==a)return i("Mismatched parentheses",n),null}}if(t.length>0){const{pos:e}=t[0];return i("Unmatched parentheses",e),null}return e},g=e=>{const t=[];for(let n=0;n<e.length;n++){const o=e[n];if(o.tok===r.Token.ABS&&o.flags&r.TokenFlag.BEGIN_SCOPE){const a=t.pop();if(t.push({tok:o.tok,pos:n}),!a)continue;const i=e.splice(a.pos+1,n-a.pos-1);e.splice(a.pos,2),e.splice(a.pos,0,{tok:r.Token.ABS,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.PREFIX},{tok:r.Token.PAREN_OP,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.UNIQUE|r.TokenFlag.BEGIN_SCOPE},...i,{tok:r.Token.PAREN_CL,val:0,flags:r.TokenFlag.IMPL_MULT_AFTER|r.TokenFlag.UNIQUE|r.TokenFlag.END_SCOPE}),n=a.pos+i.length+3,t.pop()}}for(let t=0;t<e.length;t++)e[t].tok===r.Token.MOUSE?(e.splice(t,1,{tok:r.Token.MOUSEX,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE},{tok:r.Token.DELIM,val:0,flags:0},{tok:r.Token.MOUSEY,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE}),t+=2):e[t].tok===r.Token.COMPLEX&&(e.splice(t,1,{tok:r.Token.PAREN_OP,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.BEGIN_SCOPE},{tok:r.Token.VAR,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.IMPL_MULT_AFTER},{tok:r.Token.ADD,val:0,flags:0},{tok:r.Token.VAR2,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.IMPL_MULT_AFTER|r.TokenFlag.WEBGL_ONLY},{tok:r.Token.IMAGINARY,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.IMPL_MULT_AFTER},{tok:r.Token.PAREN_CL,val:0,flags:r.TokenFlag.IMPL_MULT_AFTER|r.TokenFlag.END_SCOPE}),t+=5);for(let t=1;t<e.length;t++)e[t-1].flags&r.TokenFlag.IMPL_MULT_AFTER&&e[t].flags&r.TokenFlag.IMPL_MULT_BEFORE&&e.splice(t,0,{tok:r.Token.MULT,val:0,flags:0});for(let t=8;t>0;t--)for(let n=0;n<e.length;n++)if(a[e[n].tok]===t){let o=0,i=e.length,l=0;for(let i=n;i>=0;i--)if(e[i].flags&r.TokenFlag.BEGIN_SCOPE?l++:e[i].flags&r.TokenFlag.END_SCOPE&&l--,a[e[i].tok]<t&&0===l||l>0){o=i+1;break}l=0;for(let o=n;o<e.length;o++)if(e[o].flags&r.TokenFlag.BEGIN_SCOPE?l++:e[o].flags&r.TokenFlag.END_SCOPE&&l--,a[e[o].tok]<t&&0===l||l<0){i=o;break}e.splice(i,0,{tok:r.Token.PAREN_CL,val:0,flags:r.TokenFlag.IMPL_MULT_AFTER|r.TokenFlag.UNIQUE|r.TokenFlag.END_SCOPE}),e.splice(o,0,{tok:r.Token.PAREN_OP,val:0,flags:r.TokenFlag.IMPL_MULT_BEFORE|r.TokenFlag.UNIQUE|r.TokenFlag.BEGIN_SCOPE}),n++}for(let t=0;t<e.length;t++)e[t].tok===r.Token.SUB&&(0===t||e[t-1].flags&r.TokenFlag.BEGIN_SCOPE)&&e.splice(t,0,{tok:r.Token.NUM,val:0,flags:r.TokenFlag.IMPL_MULT_AFTER});return e},f=e=>{let t=0;for(let n=0;n<e.length;n++)if(e[n].tok===r.Token.SUB)t++;else{if(t>1)if(t%2==1)for(let o=0;o<t-1;o++)e.splice(n-t,1);else{for(let o=0;o<t;o++)e.splice(n-t,1);e.splice(n-t,0,{tok:r.Token.ADD,val:0,flags:0})}t=0}for(let t=1;t<e.length;t++)e[t].flags&r.TokenFlag.END_SCOPE&&e[t-1].flags&r.TokenFlag.BEGIN_SCOPE&&e.splice(t-1,2);return e},T=e=>{const t={op:{tok:r.Token.NONE,val:0,flags:0},left:null,right:null};let n=t;const o=[];let a=0;for(let t=0;t<e.length;t++){const l=e[t];if(l.flags&r.TokenFlag.BEGIN_SCOPE)a++;else if(l.flags&r.TokenFlag.END_SCOPE){if(a<=0)return i("Unexpected end of scope",t),null;a--,n=o.pop();continue}if(null==n.op||n.op.tok===r.Token.NONE||n.op.flags&r.TokenFlag.BEGIN_SCOPE)n.op=l,n.op.flags&r.TokenFlag.BEGIN_SCOPE&&o.push(n);else if(null==n.left){if(n.op.flags&r.TokenFlag.PREFIX){n.left={op:{tok:r.Token.UNDEF,val:0,flags:0},left:null,right:null},n.right={op:l,left:null,right:null},n.right.op.flags&r.TokenFlag.BEGIN_SCOPE&&(o.push(n),n=n.right);continue}const e=JSON.parse(JSON.stringify(n));n.left=e,n.op=l}else if(null==n.right||n.right.op.flags&r.TokenFlag.BEGIN_SCOPE)n.right={op:l,left:null,right:null},n.right.op.flags&r.TokenFlag.BEGIN_SCOPE&&(o.push(n),n=n.right);else if(n.right.op.flags&r.TokenFlag.PREFIX&&null==n.right.right)o.push(n),n=n.right,n.right={op:l,left:null,right:null};else{const e=JSON.parse(JSON.stringify(n));n.left=e,n.right=null,n.op=l}}return 0!==a?(i("Unexpected end of expression",e.length),null):t}},490:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mkSimplexNoise=void 0,t.mkSimplexNoise=e=>{const t=a(e);return{noise2D:(e,o)=>n(t,e,o),noise3D:(e,n,r)=>o(t,e,n,r),noise4D:(e,n,o,a)=>r(t,e,n,o,a)}};const n=(e,t,n)=>{const{perm:o,permMod12:r}=e;let a=0,s=0,u=0;const c=(t+n)*i,E=Math.floor(t+c),f=Math.floor(n+c),T=(E+f)*l,h=t-(E-T),d=n-(f-T),M=h>d?1:0,p=h>d?0:1,m=h-M+l,k=d-p+l,I=h-1+2*l,L=d-1+2*l,R=255&E,A=255&f;let S=.5-h*h-d*d;if(S>=0){const e=3*r[R+o[A]];S*=S,a=S*S*(g[e]*h+g[e+1]*d)}let v=.5-m*m-k*k;if(v>=0){const e=3*r[R+M+o[A+p]];v*=v,s=v*v*(g[e]*m+g[e+1]*k)}let O=.5-I*I-L*L;if(O>=0){const e=3*r[R+1+o[A+1]];O*=O,u=O*O*(g[e]*I+g[e+1]*L)}return 70*(a+s+u)},o=(e,t,n,o)=>{const{perm:r,permMod12:a}=e;let i=0,l=0,c=0,E=0;const f=(t+n+o)*s,T=Math.floor(t+f),h=Math.floor(n+f),d=Math.floor(o+f),M=(T+h+d)*u,p=t-(T-M),m=n-(h-M),k=o-(d-M);let I,L,R,A,S,v;p>=m?m>=k?(I=1,L=0,R=0,A=1,S=1,v=0):p>=k?(I=1,L=0,R=0,A=1,S=0,v=1):(I=0,L=0,R=1,A=1,S=0,v=1):m<k?(I=0,L=0,R=1,A=0,S=1,v=1):p<k?(I=0,L=1,R=0,A=0,S=1,v=1):(I=0,L=1,R=0,A=1,S=1,v=0);const O=p-I+u,P=m-L+u,_=k-R+u,N=p-A+2*u,U=m-S+2*u,C=k-v+2*u,F=p-1+3*u,x=m-1+3*u,b=k-1+3*u,y=255&T,D=255&h,B=255&d;let G=.6-p*p-m*m-k*k;if(G>=0){const e=3*a[y+r[D+r[B]]];G*=G,i=G*G*(g[e]*p+g[e+1]*m+g[e+2]*k)}let w=.6-O*O-P*P-_*_;if(w>=0){const e=3*a[y+I+r[D+L+r[B+R]]];w*=w,l=w*w*(g[e]*O+g[e+1]*P+g[e+2]*_)}let V=.6-N*N-U*U-C*C;if(V>=0){const e=3*a[y+A+r[D+S+r[B+v]]];V*=V,c=V*V*(g[e]*N+g[e+1]*U+g[e+2]*C)}let $=.6-F*F-x*x-b*b;if($>=0){const e=3*a[y+1+r[D+1+r[B+1]]];$*=$,E=$*$*(g[e]*F+g[e+1]*x+g[e+2]*b)}return 32*(i+l+c+E)},r=(e,t,n,o,r)=>{const{perm:a}=e;let i=0,l=0,s=0,u=0,g=0;const T=(t+n+o+r)*c,h=Math.floor(t+T),d=Math.floor(n+T),M=Math.floor(o+T),p=Math.floor(r+T),m=(h+d+M+p)*E,k=t-(h-m),I=n-(d-m),L=o-(M-m),R=r-(p-m);let A=0,S=0,v=0,O=0;k>I?A++:S++,k>L?A++:v++,k>R?A++:O++,I>L?S++:v++,I>R?S++:O++,L>R?v++:O++;const P=A>=3?1:0,_=S>=3?1:0,N=v>=3?1:0,U=O>=3?1:0,C=A>=2?1:0,F=S>=2?1:0,x=v>=2?1:0,b=O>=2?1:0,y=A>=1?1:0,D=S>=1?1:0,B=v>=1?1:0,G=O>=1?1:0,w=k-P+E,V=I-_+E,$=L-N+E,X=R-U+E,Q=k-C+2*E,q=I-F+2*E,H=L-x+2*E,Y=R-b+2*E,W=k-y+3*E,j=I-D+3*E,z=L-B+3*E,K=R-G+3*E,J=k-1+4*E,Z=I-1+4*E,ee=L-1+4*E,te=R-1+4*E,ne=255&h,oe=255&d,re=255&M,ae=255&p;let ie=.6-k*k-I*I-L*L-R*R;if(ie>=0){const e=a[ne+a[oe+a[re+a[ae]]]]%32*4;ie*=ie,i=ie*ie*(f[e]*k+f[e+1]*I+f[e+2]*L+f[e+3]*R)}let le=.6-w*w-V*V-$*$-X*X;if(le>=0){const e=a[ne+P+a[oe+_+a[re+N+a[ae+U]]]]%32*4;le*=le,l=le*le*(f[e]*w+f[e+1]*V+f[e+2]*$+f[e+3]*X)}let se=.6-Q*Q-q*q-H*H-Y*Y;if(se>=0){const e=a[ne+C+a[oe+F+a[re+x+a[ae+b]]]]%32*4;se*=se,s=se*se*(f[e]*Q+f[e+1]*q+f[e+2]*H+f[e+3]*Y)}let ue=.6-W*W-j*j-z*z-K*K;if(ue>=0){const e=a[ne+y+a[oe+D+a[re+B+a[ae+G]]]]%32*4;ue*=ue,u=ue*ue*(f[e]*W+f[e+1]*j+f[e+2]*z+f[e+3]*K)}let ce=.6-J*J-Z*Z-ee*ee-te*te;if(ce>=0){const e=a[ne+1+a[oe+1+a[re+1+a[ae+1]]]]%32*4;ce*=ce,g=ce*ce*(f[e]*J+f[e+1]*Z+f[e+2]*ee+f[e+3]*te)}return 27*(i+l+s+u+g)},a=e=>{const t=new Uint8Array(512),n=new Uint8Array(512),o=new Uint8Array(256);for(let e=0;e<256;e++)o[e]=e;for(let r=0;r<255;r++){const a=r+~~(e()*(256-r)),i=o[a];o[a]=o[r],t[r]=t[r+256]=i,n[r]=n[r+256]=i%12}const r=o[255];return t[255]=t[511]=r,n[255]=n[511]=r%12,{perm:t,permMod12:n}},i=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,s=1/3,u=1/6,c=(Math.sqrt(5)-1)/4,E=(5-Math.sqrt(5))/20,g=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),f=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0])},682:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.shadersDraw=t.scheduleReloadShaders=t.shaderCoreUpdate=t.initShaderCore=t.shadersClearAll=void 0;const r=n(607),a=n(85),i=n(533),l=n(195),s=n(633),u=n(750);let c=null,E=null,g=!1,f=!1,T=!1;const h={},d=document.getElementById("shader-canvas"),M=d.getContext("webgl2",{preserveDrawingBuffer:!0});function p(e){return o(this,void 0,void 0,(function*(){if(!h[e]){const t=yield fetch(e),n=yield t.text();return h[e]=n,n}return Promise.resolve(h[e])}))}function m(){return o(this,void 0,void 0,(function*(){g=!0,yield Promise.all([p("assets/shaders/plot.vert"),p("assets/shaders/plot.frag")]).then((e=>{e[1]=function(e){const t=(0,i.getPlotsShaderInfo)();return 0===t.numPlots&&(t.functions=[],t.colors=["#000000"],t.displayModes=[l.PlotDisplayMode.NONE],t.iterExpr=[]),t.functions.push("0.0"),t.iterExpr.push("vec2(0.0,0.0)"),e.replace(/USER_NUM_FUNC_INJ/g,`${t.numPlots+1}`).replace(/USER_FUNC_INJ/g,`float[](${t.functions.map((e=>`(${e})`)).join(",")})`).replace(/USER_COL_INJ/g,`vec3[](${t.colors.map((e=>{return`vec3(${t=e,`${parseInt(t.substring(1,3),16)/255}, ${parseInt(t.substring(3,5),16)/255}, ${parseInt(t.substring(5,7),16)/255}`})`;var t})).join(",")})`).replace(/USER_DISP_INJ/g,`int[](${t.displayModes.map((e=>`${e}`)).join(",")})`).replace(/USER_ITER_EXPR_INJ/g,`vec2[](${t.iterExpr.map((e=>`(${e.length>0?e:"vec2(0.0,0.0)"})`)).join(",")})`)}(e[1]);const t=function(e,t){const n=k(M.VERTEX_SHADER,e),o=k(M.FRAGMENT_SHADER,t);if(!n||!o)return null;const r=M.createProgram();return r?(M.attachShader(r,n),M.attachShader(r,o),M.linkProgram(r),M.getProgramParameter(r,M.LINK_STATUS)?r:(console.error("Failed to link program: "+M.getProgramInfoLog(r)),null)):(console.error("Failed to create program"),null)}(e[0],e[1]);t?(c={program:t,attribLocations:{vertexPosition:M.getAttribLocation(t,"aVertexPosition")},uniformLocations:{projectionMatrix:M.getUniformLocation(t,"uProjectionMatrix"),modelViewMatrix:M.getUniformLocation(t,"uModelViewMatrix"),u_resolution:M.getUniformLocation(t,"u_resolution"),u_mouse:M.getUniformLocation(t,"u_mouse"),u_time:M.getUniformLocation(t,"u_time"),u_deviation:M.getUniformLocation(t,"u_deviation"),u_domain_x:M.getUniformLocation(t,"u_domain_x"),u_domain_y:M.getUniformLocation(t,"u_domain_y"),u_display_mode:M.getUniformLocation(t,"u_display_mode")}},E=function(){const e=M.createBuffer();M.bindBuffer(M.ARRAY_BUFFER,e);return M.bufferData(M.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),M.STATIC_DRAW),e}(),f=!0,g=!1):console.error("Failed to load shaders")}))}))}function k(e,t){const n=M.createShader(e);return n?(M.shaderSource(n,t),M.compileShader(n),M.getShaderParameter(n,M.COMPILE_STATUS)?n:(console.debug("Failed to compile shader: "+M.getShaderInfoLog(n)),M.getShaderInfoLog(n),M.deleteShader(n),null)):(console.error("Failed to create shader"),null)}function I(){M.clearColor(0,0,0,1),M.clearDepth(1),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT);const e=45*Math.PI/180,t=M.canvas.clientWidth/M.canvas.clientHeight,n=s.create();s.perspective(n,e,t,.1,100);const o=s.create();s.translate(o,o,[0,0,-1]);const i=M.FLOAT;M.bindBuffer(M.ARRAY_BUFFER,E),M.vertexAttribPointer(c.attribLocations.vertexPosition,2,i,!1,0,0),M.enableVertexAttribArray(c.attribLocations.vertexPosition),M.useProgram(c.program);const l=(0,u.getMousePos)(),g=(0,a.getDomain)();M.uniformMatrix4fv(c.uniformLocations.projectionMatrix,!1,n),M.uniformMatrix4fv(c.uniformLocations.modelViewMatrix,!1,o),M.uniform2f(c.uniformLocations.u_resolution,M.canvas.width,M.canvas.height),M.uniform2f(c.uniformLocations.u_mouse,l.x,l.y),M.uniform2f(c.uniformLocations.u_domain_x,g.minX,g.maxX),M.uniform2f(c.uniformLocations.u_domain_y,g.minY,g.maxY),M.uniform1f(c.uniformLocations.u_time,(0,r.getGlobalTime)()),M.uniform1f(c.uniformLocations.u_deviation,.004),M.uniform1i(c.uniformLocations.u_display_mode,0),M.drawArrays(M.TRIANGLE_STRIP,0,4)}t.shadersClearAll=function(){(0,t.scheduleReloadShaders)()},t.initShaderCore=function(){d&&M||console.error("Failed to initialize WebGL context.")},t.shaderCoreUpdate=function(){f||g||T||(m(),T&&console.error("Failed to load shaders"))},t.scheduleReloadShaders=function(){T=!1,f=!1,g=!1},t.shadersDraw=function(){f=!1,!f||T?m().then((()=>{if(!f)return console.error("Failed to initialize shaders"),void M.clearColor(0,0,0,1);I()})):I()}},849:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildShaderFunction=t.shaderFunctionBuilderGetIterExpression=t.shaderFunctionBuilderGetError=void 0;const o=n(607),r=n(99),a=n(283);let i=null;t.shaderFunctionBuilderGetError=()=>i;let l="";t.shaderFunctionBuilderGetIterExpression=()=>l,t.buildShaderFunction=e=>{if(!e)return null;i=null,l="";const t=g(e);return console.debug("Shader function: "+t.val),t.val};const s=function(e){return console.debug("Error during constant evaluation: "+e),i=e,{val:null,cpx:!1}},u=function(e){return-1===e.toString().indexOf(".")?e.toString()+".0":e.toString()},c=e=>({val:e,cpx:!1}),E=e=>({val:e,cpx:!0}),g=function(e){var t;let n,i;switch(e.op.tok){case r.Token.UNDEF:return s("Token UNDEFINED is not allowed");case r.Token.NONE:return c("0");case r.Token.PAREN_OP:return s("Token OPEN PARENTHESIS is not allowed");case r.Token.PAREN_CL:return s("Token CLOSE PARENTHESIS is not allowed");case r.Token.BRACKET_OP:return s("Token OPEN BRACKET is not allowed");case r.Token.BRACKET_CL:return s("Token CLOSE BRACKET is not allowed");case r.Token.BRACE_OP:return s("Token OPEN BRACE is not allowed");case r.Token.BRACE_CL:return s("Token CLOSE BRACE is not allowed");case r.Token.NUM:return"number"!=typeof e.op.val?s("Token NUMBER must be a number"):c(u(e.op.val));case r.Token.CONST:return"number"!=typeof e.op.val?s("Token CONSTANT must be a number"):c(u(e.op.val));case r.Token.VAR:return c("x");case r.Token.VAR2:return c("y");case r.Token.TIME:return(0,o.scheduleRedraw)(),c("t");case r.Token.ADD:return null==e.left||null==e.right?s("Missing arguments for Token ADDITION"):(n=g(e.left),i=g(e.right),n.cpx||i.cpx?E(`add(${n.val},${i.val})`):c(`(${n.val}+${i.val})`));case r.Token.SUB:return null==e.left||null==e.right?s("Missing arguments for Token SUBTRACTION"):(n=g(e.left),i=g(e.right),n.cpx||i.cpx?E(`sub(${n.val},${i.val})`):c(`(${n.val}-${i.val})`));case r.Token.MULT:return null==e.left||null==e.right?s("Missing arguments for Token MULTIPLICATION"):(n=g(e.left),i=g(e.right),n.cpx||i.cpx?E(`mul(${n.val},${i.val})`):c(`(${n.val}*${i.val})`));case r.Token.DIV:return null==e.left||null==e.right?s("Missing arguments for Token DIVISION"):(n=g(e.left),i=g(e.right),n.cpx||i.cpx?E(`div(${n.val},${i.val})`):c(`(${n.val}/${i.val})`));case r.Token.POW:return null==e.left||null==e.right?s("Missing arguments for Token POWER"):(n=g(e.left),i=g(e.right),n.cpx||i.cpx?i.cpx?s("Power cannot be complex"):E(`_pow(${n.val},${i.val})`):c(`_pow(${n.val},${i.val})`));case r.Token.SQRT:return null==e.right?s("Missing argument for Token SQUARE ROOT"):(i=g(e.right),i.cpx?s("Square root cannot be complex"):c(`sqrt(${i.val})`));case r.Token.LOG:return null==e.right?s("Missing argument for Token LOGARITHM"):(i=g(e.right),i.cpx?s("Logarithm cannot be complex"):c(`log(${i.val})`));case r.Token.EXP:return null==e.right?s("Missing argument for Token EXPOENTIAL"):(i=g(e.right),i.cpx?s("Exponential cannot be complex"):c(`exp(${i.val})`));case r.Token.SIN:return null==e.right?s("Missing argument for Token SINE"):(i=g(e.right),i.cpx?s("Sine cannot be complex"):c(`sin(${i.val})`));case r.Token.COS:return null==e.right?s("Missing argument for Token COSINE"):(i=g(e.right),i.cpx?s("Cosine cannot be complex"):c(`cos(${i.val})`));case r.Token.TAN:return null==e.right?s("Missing argument for Token TANGENT"):(i=g(e.right),i.cpx?s("Tangent cannot be complex"):c(`tan(${i.val})`));case r.Token.ASIN:return null==e.right?s("Missing argument for Token ARC SINE"):(i=g(e.right),i.cpx?s("Arc sine cannot be complex"):c(`asin(${i.val})`));case r.Token.ACOS:return null==e.right?s("Missing argument for Token ARC COSINE"):(i=g(e.right),i.cpx?s("Arc cosine cannot be complex"):c(`acos(${i.val})`));case r.Token.ATAN:return null==e.right?s("Missing argument for Token ARC TANGENT"):(i=g(e.right),i.cpx?s("Arc tangent cannot be complex"):c(`atan(${i.val})`));case r.Token.SINH:return null==e.right?s("Missing argument for Token HYPERBOLIC SINE"):(i=g(e.right),i.cpx?s("Sine hyperbolicus cannot be complex"):c(`sinh(${i.val})`));case r.Token.COSH:return null==e.right?s("Missing argument for Token HYPERBOLIC COSINE"):(i=g(e.right),i.cpx?s("Cosine hyperbolicus cannot be complex"):c(`cosh(${i.val})`));case r.Token.TANH:return null==e.right?s("Missing argument for Token HYPERBOLIC TANGENT"):(i=g(e.right),i.cpx?s("Hyperbolic tangent cannot be complex"):c(`tanh(${i.val})`));case r.Token.FLOOR:return null==e.right?s("Missing argument for Token FLOOR"):(i=g(e.right),i.cpx?s("Floor cannot be complex"):c(`floor(${i.val})`));case r.Token.MIN:return null==e.right?s("Missing argument for Token MIN"):(0,a.isIterable)(g(e.right).val)?c(`min(${g(e.right).val})`):s("Malformed argument for Token MIN");case r.Token.MAX:return null==e.right?s("Missing argument for Token MAX"):(0,a.isIterable)(g(e.right).val)?c(`max(${g(e.right).val})`):s("Malformed argument for Token MAX");case r.Token.DELIM:return null==e.left||null==e.right?s("Missing arguments for Token DELIMITER"):c(`${g(e.left).val},${g(e.right).val}`);case r.Token.ABS:return null==e.right?s("Missing argument for Token ABSOLUTE"):(i=g(e.right),i.cpx?c(`mag(${i.val})`):c(`abs(${i.val})`));case r.Token.RAND:return null==e.right?s("Missing argument for Token RANDOM"):c(`random(${g(e.right).val})`);case r.Token.PERLIN:return null==e.right?s("Missing arguments for Token PERLIN"):(0,a.isIterable)(g(e.right).val)?c(`noise(vec2(${g(e.right).val}))`):s("Malformed argument for Token PERLIN");case r.Token.MOD:return null==e.left||null==e.right?s("Missing arguments for Token MODULUS"):c(`mod(${g(e.left).val},${g(e.right).val})`);case r.Token.LEVEL_SET:return null==e.right?s("Missing argument for Token LEVEL SET"):e.right.op.tok===r.Token.DELIM?null==e.right.left||null==e.right.right?s("Missing arguments for Token LEVEL SET"):c(`${g(e.right.left).val}+((level=${g(e.right.right).val})>0.0?0.0:0.0)`):g(e.right);case r.Token.VECTOR_FIELD:return s("Token VECTOR FIELD is not allowed");case r.Token.LESS:return null==e.left||null==e.right?s("Missing arguments for Token LESS THAN"):c(`btof(${g(e.left).val}<${g(e.right).val})`);case r.Token.GREATER:return null==e.left||null==e.right?s("Missing arguments for Token GREATER THAN"):c(`btof(${g(e.left).val}>${g(e.right).val})`);case r.Token.LESS_OR_EQUAL:return null==e.left||null==e.right?s("Missing arguments for Token LESS THAN OR EQUAL TO"):c(`btof(${g(e.left).val}<=${g(e.right).val})`);case r.Token.GREATER_OR_EQUAL:return null==e.left||null==e.right?s("Missing arguments for Token GREATER THAN OR EQUAL TO"):c(`btof(${g(e.left).val}>=${g(e.right).val})`);case r.Token.EQUAL:return null==e.left||null==e.right?s("Missing arguments for Token EQUAL TO"):c(`btof(${g(e.left).val}==${g(e.right).val})`);case r.Token.AND:return null==e.left||null==e.right?s("Missing arguments for Token AND"):c(`btof(ftob(${g(e.left).val})&&ftob(${g(e.right).val}))`);case r.Token.OR:return null==e.left||null==e.right?s("Missing arguments for Token OR"):c(`btof(ftob(${g(e.left).val})||ftob(${g(e.right).val}))`);case r.Token.USERVAR:return c(`btof(${(0,r.getUserVariable)(e.op.val)})`);case r.Token.FACTORIAL:return null==e.right?s("Missing argument for Token FACTORIAL"):c(`factorial(${g(e.right).val})`);case r.Token.SIGMOID:return null==e.right?s("Missing argument for Token SIGMOID"):c(`(1.0/(1.0+exp(-(${g(e.right).val}))))`);case r.Token.CIRCLE:return null==e.right?s("Missing argument for Token CIRCLE"):c(`circle(x,y,d,${g(e.right).val})`);case r.Token.POINT:return null==e.right?s("Missing argument for Token POINT"):c(`point(x,y,d,${g(e.right).val})`);case r.Token.TRUE:return c("btof(true)");case r.Token.FALSE:return c("btof(false)");case r.Token.POLAR:return null==e.right?s("Missing argument for Token POLAR"):c(`(POLAR+${g(e.right).val})`);case r.Token.CARTESIAN:return null==e.right?s("Missing argument for Token CARTESIAN"):c(`(CARTESIAN+${g(e.right).val})`);case r.Token.MOUSEX:return c("mx");case r.Token.MOUSEY:return c("my");case r.Token.MOUSE:return s("Token MOUSE is not allowed");case r.Token.IMAGINARY:return E("vec2(0.0,1.0)");case r.Token.SERIES:return s("Token SERIES is not allowed");case r.Token.DIV_SERIES:return null==e.right||null==e.right.left||null==e.right.right?s("Missing argument for Token SERIES"):(l=g(e.right.right).val||"",c(`divseries(i,x,y,t,${g(e.right.left).val})`));case r.Token.ITERATOR:return c("k");case r.Token.INDEX:return c("i");case r.Token.COMPLEX:return s("Token COMPLEX is not allowed");case r.Token.MAGNITUDE:return null==e.right?s("Missing argument for Token MAGNITUDE"):c(`mag(${g(e.right).val})`);case r.Token.GRADIENT:return null==e.right?s("Missing argument for Token GRADIENT"):g(e.right);case r.Token.ASSIGN:return null==e.left||null==e.right?s("Missing arguments for Token ASSIGN"):e.left.op.tok!==r.Token.ASSIGNABLE?e.left.op.tok===r.Token.USERVAR?((0,r.setUserVariable)(e.left.op.val,parseFloat(g(e.right).val)),g(e.right)):c(`btof(abs(${g(e.left).val}-${g(e.right).val})<d)`):null==(0,r.getExternVariable)(e.left.op.val)?s(`Variable ${e.left.op.val} does not exist`):(null===(t=(0,r.getExternVariable)(e.left.op.val))||void 0===t||t.set(parseFloat(g(e.right).val)),g(e.right));default:return s(`Unknown token ${e.op.val}`)}}},320:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLeftPanelWidth=t.inputSetDriverAt=t.inputSetStatusAt=t.inputSetConstEvalAt=t.inputSetErrorAt=t.inputSetColorAt=t.resetInputs=t.addNewInputWithValue=t.addNewInput=t.initInputs=t.initLeftPanel=void 0;const o=n(607),r=n(533),a=n(195),i=n(283),l=n(750),s=document.querySelector(".inputs"),u=document.querySelector(".resize-menu-panel"),c=document.getElementById("menu-panel");let E=0,g=0;t.initLeftPanel=function(){(0,l.onMouseDrag)(u,(e=>{const t=Math.max(250,Math.min(.95*window.innerWidth,e.x));document.documentElement.style.setProperty("--menu-panel-width",`${t}px`),(0,o.scheduleRedraw)()}))},t.initInputs=function(){(0,t.addNewInput)()},t.addNewInput=function(){const e=(0,i.stringToHTML)('\n\t<div class="input">\n\t<div class="status"><div class="indicator"></div></div>\n\t<input type="text" name="formula" spellcheck="false" autocorrect="off" autocomplete="off" autocapitalize="off" autofocus>\n\t<div class="delete">×</div>\n\t<div class="const-eval"></div>\n\t</div>').firstChild,n=e.querySelector("input"),a=e.querySelector(".delete"),l=e.querySelector(".indicator");null==n||n.addEventListener("keydown",(function(e){if("Enter"===e.key){if(e.preventDefault(),g>E){const e=s.querySelector(`.input[data-input-idx="${++E}"]`);return T(e),void setTimeout((function(){var t;null===(t=e.querySelector("input"))||void 0===t||t.focus()}),0)}(0,t.addNewInput)()}})),n.addEventListener("click",(function(t){T(e),E=parseInt(e.getAttribute("data-input-idx")||"0"),null==n||n.focus()})),null==n||n.addEventListener("focus",(function(t){T(e),E=parseInt(e.getAttribute("data-input-idx")||"0")})),null==n||n.addEventListener("input",(function(t){E=parseInt(e.getAttribute("data-input-idx")||"0"),l.classList.contains("disabled")?(0,r.setInputAt)(E,""):(0,r.setInputAt)(E,n.value)})),null==a||a.addEventListener("click",(function(n){var a,i;if(1===g){e.classList.add("illegal");const t=e.querySelector("input");t&&(t.value="");const n=e.querySelector(".indicator");null==n||n.classList.remove("pending","active","error","disabled");const a=e.querySelector(".const-eval");return null==a||a.classList.remove("visible"),setTimeout((()=>e.classList.remove("illegal")),200),(0,o.scheduleRedraw)(),void(0,r.resetPlots)()}e.classList.add("deleted"),g--,(0,r.setNumInputs)(g);const l=parseInt(e.getAttribute("data-input-idx")||"0"),u=s.querySelectorAll(".input"),c=[];for(let e=0;e<u.length;e++)c.push((null===(i=null===(a=f(e+1))||void 0===a?void 0:a.querySelector("input"))||void 0===i?void 0:i.value)||"");for(let e=0;e<u.length;e++){const t=parseInt(u[e].getAttribute("data-input-idx")||"0");t>l?(u[e].setAttribute("data-input-idx",(t-1).toString()),(0,r.setInputAt)(t-1,c[e])):(0,r.setInputAt)(t,c[e])}setTimeout((function(){e.remove();const n=s.querySelectorAll(".input");for(let e=0;e<n.length;e++)(0,t.inputSetColorAt)(e+1,(0,r.getColorFromIndex)(e+1)),(0,t.inputSetStatusAt)(e+1,(0,r.getStatusFromIndex)(e+1));(0,o.scheduleRedraw)()}),120)})),null==l||l.addEventListener("click",(function(t){l.classList.toggle("disabled"),E=parseInt(e.getAttribute("data-input-idx")||"0"),l.classList.contains("disabled")?(0,r.setInputAt)(E,""):(0,r.setInputAt)(E,n.value)})),e.setAttribute("data-input-idx",(++E).toString()),e.classList.add("created"),setTimeout((function(){e.classList.remove("created")}),120),g++,(0,r.setNumInputs)(g),T(e),setTimeout((function(){null==n||n.focus()}),0),s.appendChild(e)},t.addNewInputWithValue=function(e){(0,t.addNewInput)(),(0,r.setInputAt)(E,e);const n=s.querySelector(`.input[data-input-idx="${E}"] input`);n&&(n.value=e)},t.resetInputs=function(){const e=s.querySelectorAll(".input");for(let t=0;t<e.length;t++)e[t].remove();g=0,(0,r.setNumInputs)(g),E=0,(0,r.resetPlots)()};const f=function(e){return s.querySelector(`.input[data-input-idx="${e}"]`)};t.inputSetColorAt=function(e,t){var n;null===(n=f(e))||void 0===n||n.setAttribute("data-color",t)},t.inputSetErrorAt=function(e,t){const n=f(e);if(!n)return;const o=n.querySelector(".indicator");o&&o.setAttribute("data-error",t)},t.inputSetConstEvalAt=function(e,t){const n=f(e);if(!n)return;const o=n.querySelector(".const-eval");o&&((0,i.isIterable)(t)?o.innerText=`= (${t.toString()})`:o.innerText="= "+(0,i.complexToString)(t),o.classList.add("visible"))},t.inputSetStatusAt=function(e,t){const n=f(e);if(!n)return;const o=n.querySelector(".indicator");if(!o)return;o.classList.remove("pending","active","error");const r=n.querySelector(".const-eval");if(r)switch(t){case a.PlotStatus.PENDING:o.classList.add("pending"),o.innerHTML="",r.classList.remove("visible");break;case a.PlotStatus.ACTIVE:o.classList.add("active"),o.style.backgroundColor=n.getAttribute("data-color")||"#000",o.innerHTML="";break;case a.PlotStatus.ERROR:o.classList.add("error"),o.innerHTML="!",r.classList.remove("visible")}},t.inputSetDriverAt=function(e,t){const n=f(e);if(!n)return;const o=n.querySelector(".const-eval");o&&t!==a.PlotDriver.CONSTANT&&o.classList.remove("visible")};const T=function(e){s.querySelectorAll(".input").forEach((e=>{e.classList.remove("active")})),e.classList.add("active")};t.getLeftPanelWidth=function(){return c.offsetWidth}},139:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initMenuBar=void 0;const o=n(85),r=n(533),a=n(283),i=document.getElementById("menu-bar");t.initMenuBar=function(){Array.from(i.querySelectorAll("button")).forEach((e=>{const t=e.dataset.icon||"",n=e.dataset.href||"",o=e.dataset.filter||"";if(t&&n){const r='<div class="button-icon"></div>',i=(0,a.stringToHTML)(r).firstChild;i.style.backgroundImage=`url('${t}')`,i.style.filter=o,e.appendChild(i),e.addEventListener("click",(()=>{window.open(n,"_blank")}))}}));const e=document.querySelector(".demo-button"),t=document.querySelector(".examples-list");let n,l=0;fetch("assets/demo/demo.json").then((e=>e.json())).then((e=>{var o,a;n=e,l=null==e?void 0:e.numPlots;for(let i=0;i<l;i++){const l=document.createElement("div"),s=document.createElement("h3");s.innerHTML=null===(o=null==e?void 0:e.plots[i])||void 0===o?void 0:o.name,l.appendChild(s),l.classList.add("example-list-item");const u=document.createElement("iframe");u.src=`?plot=${(null===(a=null==n?void 0:n.plots[i])||void 0===a?void 0:a.inputs.map(encodeURIComponent).join(";"))||""}&preview=true`,u.setAttribute("loading","lazy"),u.classList.add("example-preview"),u.style.overflow="hidden",u.style.border="none",l.appendChild(u);const c=document.createElement("div");c.classList.add("example-clickable"),c.addEventListener("click",(()=>{var e,t;(0,r.loadPlots)((null===(e=null==n?void 0:n.plots[i])||void 0===e?void 0:e.inputs)||"",(null===(t=null==n?void 0:n.plots[i])||void 0===t?void 0:t.defaults)||"")})),l.appendChild(c),t.appendChild(l)}})),e.addEventListener("click",(()=>{t.classList.toggle("hidden")})),document.querySelector(".menu-bar-title h1").onclick=()=>window.location.replace(window.location.origin),document.querySelector(".export-button").addEventListener("click",(()=>{(0,o.enablePreview)()})),document.querySelector(".exit-fullscreen").addEventListener("click",(()=>{window.location.reload()}))}},750:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initUserInteract=t.onMouseDrag=t.getMousePos=void 0;const o=n(283);let r,a=!1,i=!1;const l=new o.Vector(0,0),s=new Map;t.getMousePos=function(){return l},t.onMouseDrag=function(e,t){s.set(e,t)},t.initUserInteract=function(){document.addEventListener("mousedown",(function(e){i=!0})),document.addEventListener("mousemove",(function(e){if(i)if(l.set(e.clientX,e.clientY),a)r(l);else for(const[t,n]of s)if(null==t?void 0:t.contains(e.target))return n(l),a=!0,void(r=n)})),document.addEventListener("mouseup",(function(e){a=!1,i=!1}))}},283:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splitmix32=t.map=t.sigmoid=t.factorial=t.isIterable=t.cpx=t.complexToString=t.Vector=t.stringToHTML=void 0,t.stringToHTML=function(e){return(new DOMParser).parseFromString(e,"text/html").body};class n{constructor(e,t){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}add(e){return this.x+=e.x,this.y+=e.y,this}mult(e){return this.x*=e,this.y*=e,this}copy(){return new n(this.x,this.y)}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}magSq(){return this.x*this.x+this.y*this.y}heading(){return Math.atan(this.y/this.x)}rotate(e){const t=this.heading()+e,n=this.mag();return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this}normalize(){const e=this.mag();return 0!==e&&this.mult(1/e),this}setMag(e){return this.normalize().mult(e)}}t.Vector=n,t.complexToString=function(e){const t=Math.round(1e6*e.re)/1e6,n=Math.round(1e6*e.im)/1e6;return 0===n?t.toString():t+" + "+n+"i"},t.cpx=e=>({re:e,im:0}),t.isIterable=e=>null!=e&&"function"==typeof e[Symbol.iterator],t.factorial=function(e){const t=Math.floor(e),n=e-t;let o=function(e){return(((((.07288448978215456*e-.31390051543712616)*e+.6538907084614038)*e-.810425715520978)*e+.9737655441276729)*e-.5761851668648887)*e+.9999830044034752}(n);if(e<0)for(let e=0;e<-t;e++)o/=n-e;else for(let e=1;e<t+1;e++)o*=n+e;return e>0?o:1/0},t.sigmoid=function(e){return 1/(1+Math.exp(-e))},t.map=function(e,t,n,o,r){return(e-t)/(n-t)*(r-o)+o},t.splitmix32=function(e){return function(){let t=(e=2654435769+(e|=0)|0)^e>>>16;return t=Math.imul(t,569420461),t^=t>>>15,t=Math.imul(t,1935289751),((t^=t>>>15)>>>0)/4294967296}}},607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFPSSmoothed=t.getGlobalTime=t.scheduleExit=t.scheduleSnapshot=t.scheduleRedraw=void 0;const o=n(320),r=n(139),a=n(85),i=n(750),l=n(533),s=n(682);let u=!0,c=!1,E=!1,g=0,f=0,T=0;const h=Array(100).fill(60);t.scheduleRedraw=function(){u=!0},t.scheduleSnapshot=function(){c=!0},t.scheduleExit=function(){E=!0},t.getGlobalTime=()=>g,t.getFPSSmoothed=()=>h.reduce(((e,t)=>e+t))/h.length,window.onload=function(){(0,i.initUserInteract)(),(0,s.initShaderCore)(),(0,o.initInputs)(),(0,a.initCanvas)()||((0,r.initMenuBar)(),(0,o.initLeftPanel)()),d()};const d=function(){u&&(u=!1,(0,a.canvasDraw)(),(0,s.shadersDraw)(),(0,l.drawPlots)()),(0,a.driveCanvas)(),(0,l.drivePlots)(),(0,s.shaderCoreUpdate)(),g+=.01;const e=Date.now();f=e-T,T=e,h.push(1e3/f),h.length>100&&h.shift(),c&&(c=!1,(0,a.canvasFreezeFrame)()),E||requestAnimationFrame(d)}},633:(e,t,n)=>{n.r(t),n.d(t,{add:()=>j,adjoint:()=>f,clone:()=>i,copy:()=>l,create:()=>a,decompose:()=>F,determinant:()=>T,equals:()=>ee,exactEquals:()=>Z,frob:()=>W,fromQuat:()=>y,fromQuat2:()=>_,fromRotation:()=>A,fromRotationTranslation:()=>P,fromRotationTranslationScale:()=>x,fromRotationTranslationScaleOrigin:()=>b,fromScaling:()=>R,fromTranslation:()=>L,fromValues:()=>s,fromXRotation:()=>S,fromYRotation:()=>v,fromZRotation:()=>O,frustum:()=>D,getRotation:()=>C,getScaling:()=>U,getTranslation:()=>N,identity:()=>c,invert:()=>g,lookAt:()=>q,mul:()=>te,multiply:()=>h,multiplyScalar:()=>K,multiplyScalarAndAdd:()=>J,ortho:()=>X,orthoNO:()=>$,orthoZO:()=>Q,perspective:()=>G,perspectiveFromFieldOfView:()=>V,perspectiveNO:()=>B,perspectiveZO:()=>w,rotate:()=>p,rotateX:()=>m,rotateY:()=>k,rotateZ:()=>I,scale:()=>M,set:()=>u,str:()=>Y,sub:()=>ne,subtract:()=>z,targetTo:()=>H,translate:()=>d,transpose:()=>E});var o=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array;function a(){const e=new r(16);return r!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function i(e){const t=new r(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s(e,t,n,o,a,i,l,s,u,c,E,g,f,T,h,d){const M=new r(16);return M[0]=e,M[1]=t,M[2]=n,M[3]=o,M[4]=a,M[5]=i,M[6]=l,M[7]=s,M[8]=u,M[9]=c,M[10]=E,M[11]=g,M[12]=f,M[13]=T,M[14]=h,M[15]=d,M}function u(e,t,n,o,r,a,i,l,s,u,c,E,g,f,T,h,d){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=a,e[5]=i,e[6]=l,e[7]=s,e[8]=u,e[9]=c,e[10]=E,e[11]=g,e[12]=f,e[13]=T,e[14]=h,e[15]=d,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E(e,t){if(e===t){const n=t[1],o=t[2],r=t[3],a=t[6],i=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=o,e[9]=a,e[11]=t[14],e[12]=r,e[13]=i,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function g(e,t){const n=t[0],o=t[1],r=t[2],a=t[3],i=t[4],l=t[5],s=t[6],u=t[7],c=t[8],E=t[9],g=t[10],f=t[11],T=t[12],h=t[13],d=t[14],M=t[15],p=n*l-o*i,m=n*s-r*i,k=n*u-a*i,I=o*s-r*l,L=o*u-a*l,R=r*u-a*s,A=c*h-E*T,S=c*d-g*T,v=c*M-f*T,O=E*d-g*h,P=E*M-f*h,_=g*M-f*d;let N=p*_-m*P+k*O+I*v-L*S+R*A;return N?(N=1/N,e[0]=(l*_-s*P+u*O)*N,e[1]=(r*P-o*_-a*O)*N,e[2]=(h*R-d*L+M*I)*N,e[3]=(g*L-E*R-f*I)*N,e[4]=(s*v-i*_-u*S)*N,e[5]=(n*_-r*v+a*S)*N,e[6]=(d*k-T*R-M*m)*N,e[7]=(c*R-g*k+f*m)*N,e[8]=(i*P-l*v+u*A)*N,e[9]=(o*v-n*P-a*A)*N,e[10]=(T*L-h*k+M*p)*N,e[11]=(E*k-c*L-f*p)*N,e[12]=(l*S-i*O-s*A)*N,e[13]=(n*O-o*S+r*A)*N,e[14]=(h*m-T*I-d*p)*N,e[15]=(c*I-E*m+g*p)*N,e):null}function f(e,t){const n=t[0],o=t[1],r=t[2],a=t[3],i=t[4],l=t[5],s=t[6],u=t[7],c=t[8],E=t[9],g=t[10],f=t[11],T=t[12],h=t[13],d=t[14],M=t[15],p=n*l-o*i,m=n*s-r*i,k=n*u-a*i,I=o*s-r*l,L=o*u-a*l,R=r*u-a*s,A=c*h-E*T,S=c*d-g*T,v=c*M-f*T,O=E*d-g*h,P=E*M-f*h,_=g*M-f*d;return e[0]=l*_-s*P+u*O,e[1]=r*P-o*_-a*O,e[2]=h*R-d*L+M*I,e[3]=g*L-E*R-f*I,e[4]=s*v-i*_-u*S,e[5]=n*_-r*v+a*S,e[6]=d*k-T*R-M*m,e[7]=c*R-g*k+f*m,e[8]=i*P-l*v+u*A,e[9]=o*v-n*P-a*A,e[10]=T*L-h*k+M*p,e[11]=E*k-c*L-f*p,e[12]=l*S-i*O-s*A,e[13]=n*O-o*S+r*A,e[14]=h*m-T*I-d*p,e[15]=c*I-E*m+g*p,e}function T(e){const t=e[0],n=e[1],o=e[2],r=e[3],a=e[4],i=e[5],l=e[6],s=e[7],u=e[8],c=e[9],E=e[10],g=e[11],f=e[12],T=e[13],h=e[14],d=t*i-n*a,M=t*l-o*a,p=n*l-o*i,m=u*T-c*f,k=u*h-E*f,I=c*h-E*T;return s*(t*I-n*k+o*m)-r*(a*I-i*k+l*m)+e[15]*(u*p-c*M+E*d)-g*(f*p-T*M+h*d)}function h(e,t,n){const o=t[0],r=t[1],a=t[2],i=t[3],l=t[4],s=t[5],u=t[6],c=t[7],E=t[8],g=t[9],f=t[10],T=t[11],h=t[12],d=t[13],M=t[14],p=t[15];let m=n[0],k=n[1],I=n[2],L=n[3];return e[0]=m*o+k*l+I*E+L*h,e[1]=m*r+k*s+I*g+L*d,e[2]=m*a+k*u+I*f+L*M,e[3]=m*i+k*c+I*T+L*p,m=n[4],k=n[5],I=n[6],L=n[7],e[4]=m*o+k*l+I*E+L*h,e[5]=m*r+k*s+I*g+L*d,e[6]=m*a+k*u+I*f+L*M,e[7]=m*i+k*c+I*T+L*p,m=n[8],k=n[9],I=n[10],L=n[11],e[8]=m*o+k*l+I*E+L*h,e[9]=m*r+k*s+I*g+L*d,e[10]=m*a+k*u+I*f+L*M,e[11]=m*i+k*c+I*T+L*p,m=n[12],k=n[13],I=n[14],L=n[15],e[12]=m*o+k*l+I*E+L*h,e[13]=m*r+k*s+I*g+L*d,e[14]=m*a+k*u+I*f+L*M,e[15]=m*i+k*c+I*T+L*p,e}function d(e,t,n){const o=n[0],r=n[1],a=n[2];let i,l,s,u,c,E,g,f,T,h,d,M;return t===e?(e[12]=t[0]*o+t[4]*r+t[8]*a+t[12],e[13]=t[1]*o+t[5]*r+t[9]*a+t[13],e[14]=t[2]*o+t[6]*r+t[10]*a+t[14],e[15]=t[3]*o+t[7]*r+t[11]*a+t[15]):(i=t[0],l=t[1],s=t[2],u=t[3],c=t[4],E=t[5],g=t[6],f=t[7],T=t[8],h=t[9],d=t[10],M=t[11],e[0]=i,e[1]=l,e[2]=s,e[3]=u,e[4]=c,e[5]=E,e[6]=g,e[7]=f,e[8]=T,e[9]=h,e[10]=d,e[11]=M,e[12]=i*o+c*r+T*a+t[12],e[13]=l*o+E*r+h*a+t[13],e[14]=s*o+g*r+d*a+t[14],e[15]=u*o+f*r+M*a+t[15]),e}function M(e,t,n){const o=n[0],r=n[1],a=n[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,n,r){let a,i,l,s,u,c,E,g,f,T,h,d,M,p,m,k,I,L,R,A,S,v,O,P,_=r[0],N=r[1],U=r[2],C=Math.hypot(_,N,U);return C<o?null:(C=1/C,_*=C,N*=C,U*=C,a=Math.sin(n),i=Math.cos(n),l=1-i,s=t[0],u=t[1],c=t[2],E=t[3],g=t[4],f=t[5],T=t[6],h=t[7],d=t[8],M=t[9],p=t[10],m=t[11],k=_*_*l+i,I=N*_*l+U*a,L=U*_*l-N*a,R=_*N*l-U*a,A=N*N*l+i,S=U*N*l+_*a,v=_*U*l+N*a,O=N*U*l-_*a,P=U*U*l+i,e[0]=s*k+g*I+d*L,e[1]=u*k+f*I+M*L,e[2]=c*k+T*I+p*L,e[3]=E*k+h*I+m*L,e[4]=s*R+g*A+d*S,e[5]=u*R+f*A+M*S,e[6]=c*R+T*A+p*S,e[7]=E*R+h*A+m*S,e[8]=s*v+g*O+d*P,e[9]=u*v+f*O+M*P,e[10]=c*v+T*O+p*P,e[11]=E*v+h*O+m*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function m(e,t,n){const o=Math.sin(n),r=Math.cos(n),a=t[4],i=t[5],l=t[6],s=t[7],u=t[8],c=t[9],E=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+u*o,e[5]=i*r+c*o,e[6]=l*r+E*o,e[7]=s*r+g*o,e[8]=u*r-a*o,e[9]=c*r-i*o,e[10]=E*r-l*o,e[11]=g*r-s*o,e}function k(e,t,n){const o=Math.sin(n),r=Math.cos(n),a=t[0],i=t[1],l=t[2],s=t[3],u=t[8],c=t[9],E=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-u*o,e[1]=i*r-c*o,e[2]=l*r-E*o,e[3]=s*r-g*o,e[8]=a*o+u*r,e[9]=i*o+c*r,e[10]=l*o+E*r,e[11]=s*o+g*r,e}function I(e,t,n){const o=Math.sin(n),r=Math.cos(n),a=t[0],i=t[1],l=t[2],s=t[3],u=t[4],c=t[5],E=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+u*o,e[1]=i*r+c*o,e[2]=l*r+E*o,e[3]=s*r+g*o,e[4]=u*r-a*o,e[5]=c*r-i*o,e[6]=E*r-l*o,e[7]=g*r-s*o,e}function L(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function R(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t,n){let r,a,i,l=n[0],s=n[1],u=n[2],c=Math.hypot(l,s,u);return c<o?null:(c=1/c,l*=c,s*=c,u*=c,r=Math.sin(t),a=Math.cos(t),i=1-a,e[0]=l*l*i+a,e[1]=s*l*i+u*r,e[2]=u*l*i-s*r,e[3]=0,e[4]=l*s*i-u*r,e[5]=s*s*i+a,e[6]=u*s*i+l*r,e[7]=0,e[8]=l*u*i+s*r,e[9]=s*u*i-l*r,e[10]=u*u*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function S(e,t){const n=Math.sin(t),o=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t){const n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t){const n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function P(e,t,n){const o=t[0],r=t[1],a=t[2],i=t[3],l=o+o,s=r+r,u=a+a,c=o*l,E=o*s,g=o*u,f=r*s,T=r*u,h=a*u,d=i*l,M=i*s,p=i*u;return e[0]=1-(f+h),e[1]=E+p,e[2]=g-M,e[3]=0,e[4]=E-p,e[5]=1-(c+h),e[6]=T+d,e[7]=0,e[8]=g+M,e[9]=T-d,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function _(e,t){const n=new r(3),o=-t[0],a=-t[1],i=-t[2],l=t[3],s=t[4],u=t[5],c=t[6],E=t[7],g=o*o+a*a+i*i+l*l;return g>0?(n[0]=2*(s*l+E*o+u*i-c*a)/g,n[1]=2*(u*l+E*a+c*o-s*i)/g,n[2]=2*(c*l+E*i+s*a-u*o)/g):(n[0]=2*(s*l+E*o+u*i-c*a),n[1]=2*(u*l+E*a+c*o-s*i),n[2]=2*(c*l+E*i+s*a-u*o)),P(e,t,n),e}function N(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function U(e,t){const n=t[0],o=t[1],r=t[2],a=t[4],i=t[5],l=t[6],s=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,o,r),e[1]=Math.hypot(a,i,l),e[2]=Math.hypot(s,u,c),e}function C(e,t){const n=new r(3);U(n,t);const o=1/n[0],a=1/n[1],i=1/n[2],l=t[0]*o,s=t[1]*a,u=t[2]*i,c=t[4]*o,E=t[5]*a,g=t[6]*i,f=t[8]*o,T=t[9]*a,h=t[10]*i,d=l+E+h;let M=0;return d>0?(M=2*Math.sqrt(d+1),e[3]=.25*M,e[0]=(g-T)/M,e[1]=(f-u)/M,e[2]=(s-c)/M):l>E&&l>h?(M=2*Math.sqrt(1+l-E-h),e[3]=(g-T)/M,e[0]=.25*M,e[1]=(s+c)/M,e[2]=(f+u)/M):E>h?(M=2*Math.sqrt(1+E-l-h),e[3]=(f-u)/M,e[0]=(s+c)/M,e[1]=.25*M,e[2]=(g+T)/M):(M=2*Math.sqrt(1+h-l-E),e[3]=(s-c)/M,e[0]=(f+u)/M,e[1]=(g+T)/M,e[2]=.25*M),e}function F(e,t,n,o){t[0]=o[12],t[1]=o[13],t[2]=o[14];const r=o[0],a=o[1],i=o[2],l=o[4],s=o[5],u=o[6],c=o[8],E=o[9],g=o[10];n[0]=Math.hypot(r,a,i),n[1]=Math.hypot(l,s,u),n[2]=Math.hypot(c,E,g);const f=1/n[0],T=1/n[1],h=1/n[2],d=r*f,M=a*T,p=i*h,m=l*f,k=s*T,I=u*h,L=c*f,R=E*T,A=g*h,S=d+k+A;let v=0;return S>0?(v=2*Math.sqrt(S+1),e[3]=.25*v,e[0]=(I-R)/v,e[1]=(L-p)/v,e[2]=(M-m)/v):d>k&&d>A?(v=2*Math.sqrt(1+d-k-A),e[3]=(I-R)/v,e[0]=.25*v,e[1]=(M+m)/v,e[2]=(L+p)/v):k>A?(v=2*Math.sqrt(1+k-d-A),e[3]=(L-p)/v,e[0]=(M+m)/v,e[1]=.25*v,e[2]=(I+R)/v):(v=2*Math.sqrt(1+A-d-k),e[3]=(M-m)/v,e[0]=(L+p)/v,e[1]=(I+R)/v,e[2]=.25*v),e}function x(e,t,n,o){const r=t[0],a=t[1],i=t[2],l=t[3],s=r+r,u=a+a,c=i+i,E=r*s,g=r*u,f=r*c,T=a*u,h=a*c,d=i*c,M=l*s,p=l*u,m=l*c,k=o[0],I=o[1],L=o[2];return e[0]=(1-(T+d))*k,e[1]=(g+m)*k,e[2]=(f-p)*k,e[3]=0,e[4]=(g-m)*I,e[5]=(1-(E+d))*I,e[6]=(h+M)*I,e[7]=0,e[8]=(f+p)*L,e[9]=(h-M)*L,e[10]=(1-(E+T))*L,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function b(e,t,n,o,r){const a=t[0],i=t[1],l=t[2],s=t[3],u=a+a,c=i+i,E=l+l,g=a*u,f=a*c,T=a*E,h=i*c,d=i*E,M=l*E,p=s*u,m=s*c,k=s*E,I=o[0],L=o[1],R=o[2],A=r[0],S=r[1],v=r[2],O=(1-(h+M))*I,P=(f+k)*I,_=(T-m)*I,N=(f-k)*L,U=(1-(g+M))*L,C=(d+p)*L,F=(T+m)*R,x=(d-p)*R,b=(1-(g+h))*R;return e[0]=O,e[1]=P,e[2]=_,e[3]=0,e[4]=N,e[5]=U,e[6]=C,e[7]=0,e[8]=F,e[9]=x,e[10]=b,e[11]=0,e[12]=n[0]+A-(O*A+N*S+F*v),e[13]=n[1]+S-(P*A+U*S+x*v),e[14]=n[2]+v-(_*A+C*S+b*v),e[15]=1,e}function y(e,t){const n=t[0],o=t[1],r=t[2],a=t[3],i=n+n,l=o+o,s=r+r,u=n*i,c=o*i,E=o*l,g=r*i,f=r*l,T=r*s,h=a*i,d=a*l,M=a*s;return e[0]=1-E-T,e[1]=c+M,e[2]=g-d,e[3]=0,e[4]=c-M,e[5]=1-u-T,e[6]=f+h,e[7]=0,e[8]=g+d,e[9]=f-h,e[10]=1-u-E,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function D(e,t,n,o,r,a,i){const l=1/(n-t),s=1/(r-o),u=1/(a-i);return e[0]=2*a*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*s,e[6]=0,e[7]=0,e[8]=(n+t)*l,e[9]=(r+o)*s,e[10]=(i+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*u,e[15]=0,e}function B(e,t,n,o,r){const a=1/Math.tan(t/2);if(e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0){const t=1/(o-r);e[10]=(r+o)*t,e[14]=2*r*o*t}else e[10]=-1,e[14]=-2*o;return e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){let e=0,t=arguments.length;for(;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var G=B;function w(e,t,n,o,r){const a=1/Math.tan(t/2);if(e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0){const t=1/(o-r);e[10]=r*t,e[14]=r*o*t}else e[10]=-1,e[14]=-o;return e}function V(e,t,n,o){const r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+l),u=2/(r+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(i-l)*s*.5,e[9]=(r-a)*u*.5,e[10]=o/(n-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n/(n-o),e[15]=0,e}function $(e,t,n,o,r,a,i){const l=1/(t-n),s=1/(o-r),u=1/(a-i);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*l,e[13]=(r+o)*s,e[14]=(i+a)*u,e[15]=1,e}var X=$;function Q(e,t,n,o,r,a,i){const l=1/(t-n),s=1/(o-r),u=1/(a-i);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+n)*l,e[13]=(r+o)*s,e[14]=a*u,e[15]=1,e}function q(e,t,n,r){let a,i,l,s,u,E,g,f,T,h;const d=t[0],M=t[1],p=t[2],m=r[0],k=r[1],I=r[2],L=n[0],R=n[1],A=n[2];return Math.abs(d-L)<o&&Math.abs(M-R)<o&&Math.abs(p-A)<o?c(e):(g=d-L,f=M-R,T=p-A,h=1/Math.hypot(g,f,T),g*=h,f*=h,T*=h,a=k*T-I*f,i=I*g-m*T,l=m*f-k*g,h=Math.hypot(a,i,l),h?(h=1/h,a*=h,i*=h,l*=h):(a=0,i=0,l=0),s=f*l-T*i,u=T*a-g*l,E=g*i-f*a,h=Math.hypot(s,u,E),h?(h=1/h,s*=h,u*=h,E*=h):(s=0,u=0,E=0),e[0]=a,e[1]=s,e[2]=g,e[3]=0,e[4]=i,e[5]=u,e[6]=f,e[7]=0,e[8]=l,e[9]=E,e[10]=T,e[11]=0,e[12]=-(a*d+i*M+l*p),e[13]=-(s*d+u*M+E*p),e[14]=-(g*d+f*M+T*p),e[15]=1,e)}function H(e,t,n,o){const r=t[0],a=t[1],i=t[2],l=o[0],s=o[1],u=o[2];let c=r-n[0],E=a-n[1],g=i-n[2],f=c*c+E*E+g*g;f>0&&(f=1/Math.sqrt(f),c*=f,E*=f,g*=f);let T=s*g-u*E,h=u*c-l*g,d=l*E-s*c;return f=T*T+h*h+d*d,f>0&&(f=1/Math.sqrt(f),T*=f,h*=f,d*=f),e[0]=T,e[1]=h,e[2]=d,e[3]=0,e[4]=E*d-g*h,e[5]=g*T-c*d,e[6]=c*h-E*T,e[7]=0,e[8]=c,e[9]=E,e[10]=g,e[11]=0,e[12]=r,e[13]=a,e[14]=i,e[15]=1,e}function Y(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function W(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function j(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function z(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function K(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function J(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e[3]=t[3]+n[3]*o,e[4]=t[4]+n[4]*o,e[5]=t[5]+n[5]*o,e[6]=t[6]+n[6]*o,e[7]=t[7]+n[7]*o,e[8]=t[8]+n[8]*o,e[9]=t[9]+n[9]*o,e[10]=t[10]+n[10]*o,e[11]=t[11]+n[11]*o,e[12]=t[12]+n[12]*o,e[13]=t[13]+n[13]*o,e[14]=t[14]+n[14]*o,e[15]=t[15]+n[15]*o,e}function Z(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function ee(e,t){const n=e[0],r=e[1],a=e[2],i=e[3],l=e[4],s=e[5],u=e[6],c=e[7],E=e[8],g=e[9],f=e[10],T=e[11],h=e[12],d=e[13],M=e[14],p=e[15],m=t[0],k=t[1],I=t[2],L=t[3],R=t[4],A=t[5],S=t[6],v=t[7],O=t[8],P=t[9],_=t[10],N=t[11],U=t[12],C=t[13],F=t[14],x=t[15];return Math.abs(n-m)<=o*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-k)<=o*Math.max(1,Math.abs(r),Math.abs(k))&&Math.abs(a-I)<=o*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(i-L)<=o*Math.max(1,Math.abs(i),Math.abs(L))&&Math.abs(l-R)<=o*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(s-A)<=o*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-S)<=o*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-v)<=o*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(E-O)<=o*Math.max(1,Math.abs(E),Math.abs(O))&&Math.abs(g-P)<=o*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(f-_)<=o*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(T-N)<=o*Math.max(1,Math.abs(T),Math.abs(N))&&Math.abs(h-U)<=o*Math.max(1,Math.abs(h),Math.abs(U))&&Math.abs(d-C)<=o*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(M-F)<=o*Math.max(1,Math.abs(M),Math.abs(F))&&Math.abs(p-x)<=o*Math.max(1,Math.abs(p),Math.abs(x))}var te=h,ne=z}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();